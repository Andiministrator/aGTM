___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "CLIENT",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "aGTM",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "aGTM Client for serverside Google Tag Manager",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "GROUP",
    "name": "aGTMid",
    "displayName": "Use different aGTM Setups using ID\u0027s",
    "groupStyle": "ZIPPY_OPEN_ON_PARAM",
    "subParams": [
      {
        "type": "PARAM_TABLE",
        "name": "ids",
        "displayName": "Allowed (a)GTM ID(s)",
        "paramTableColumns": [
          {
            "param": {
              "type": "TEXT",
              "name": "id",
              "displayName": "(a)GTM ID",
              "simpleValueType": true,
              "notSetText": "You need to setup an ID. Otherwise delete this row.",
              "help": "Set an ID to load this aGTM only for special uses.\u003cbr /\u003e You can use any sting, even a GTM ID, like GTM-XYZ123, but it won\u0027t have an effect for the GTM Setup.",
              "valueHint": "GTM-XYZ123"
            },
            "isUnique": true
          }
        ],
        "help": "Set allowed IDs to load this aGTM only for special uses.\u003cbr /\u003e You can use any sting, even a GTM ID, like GTM-XYZ123, but it won\u0027t have an effect for the GTM Setup.\u003cBR /\u003e Leave it blank if the aGTM Setup should alway load."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "aGTMsetup",
    "displayName": "GTM Container Setup",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "gtm",
        "displayName": "",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "GTM Container ID",
            "name": "gtm_id",
            "type": "TEXT",
            "valueHint": "GTM-XYZ123",
            "isUnique": true
          },
          {
            "defaultValue": true,
            "displayName": "Consent Check",
            "name": "gtm_consent",
            "type": "SELECT",
            "selectItems": [
              {
                "value": true,
                "displayValue": "Yes"
              },
              {
                "value": false,
                "displayValue": "No"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Environment String",
            "name": "gtm_env",
            "type": "TEXT",
            "valueHint": "Example: \u0027\u0026gtm_auth\u003dABC123xyz\u0026gtm_preview\u003denv-1\u0026gtm_cookies_win\u003dx\u0027"
          },
          {
            "defaultValue": "https://www.googletagmanager.com/gtm.js",
            "displayName": "Container URL",
            "name": "gtm_url",
            "type": "TEXT",
            "valueHint": "If you use an own url to the GTM (e.g. using the serverside Google Tag Manager), you can set your URL here. Leave it blank if you don\u0027t know what this means. If this option is not set (or if it is empty) the standard GTM URL will be used (https://www.googletagmanager.com/gtm.js)."
          }
        ],
        "newRowButtonText": "Add a GTM Container",
        "notSetText": "Please setup at least one GHTM Container.\u003cbr/\u003e Otherwise no GTM Container will load (through aGTM) ...",
        "help": "Configure the GTM Container(s) that should fire ..."
      },
      {
        "type": "LABEL",
        "name": "gtm_help",
        "displayName": "Read the \u003ca href\u003d\"https://github.com/Andiministrator/aGTM?tab\u003dreadme-ov-file#gtm\"\u003eDocumentation Chapter\u003c/a\u003e for more information."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "aGTMcmp",
    "displayName": "Consent Check",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "cmp",
        "displayName": "Used CMP (Consent Tool)",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": "aGTM.f.consent_check\u003dfunction(o){if(\"string\"!\u003dtypeof o||\"init\"!\u003do\u0026\u0026\"update\"!\u003do)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:o}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003do\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"\u003d\u003dtypeof BorlabsCookie\u0026\u0026\"function\"\u003d\u003dtypeof BorlabsCookie.getCookie){if(\"object\"!\u003dtypeof borlabsCookieConfig||\"object\"!\u003dtypeof borlabsCookieConfig.cookies)return!1;var e\u003dborlabsCookieConfig.cookies;if(\"object\"!\u003dtypeof BorlabsCookie||\"function\"!\u003dtypeof BorlabsCookie.getCookie)return!1;var n\u003dBorlabsCookie.getCookie()}else{if(\"object\"!\u003dtypeof borlabsCookieConfig||\"object\"!\u003dtypeof borlabsCookieConfig.services)return!1;e\u003dborlabsCookieConfig.services;if(\"object\"!\u003dtypeof BorlabsCookie)return!1;if(\"object\"!\u003dtypeof BorlabsCookie.Cookie._pluginCookie)return!1;if(\"string\"!\u003dtypeof(n\u003dBorlabsCookie.Cookie._pluginCookie).expires||!n.expires)return!1}if(\"object\"!\u003dtypeof n||\"object\"!\u003dtypeof n.consents)return!1;var t\u003dn.consents;\"string\"\u003d\u003dtypeof n.uid\u0026\u0026(aGTM.d.consent.consent_id\u003dn.uid);var i\u003d[],s\u003d[],r\u003d[],a\u003d[],f\u003d0;for(var c in e)if(\"string\"\u003d\u003dtypeof c){s.push(c);for(var l\u003d0;l\u003cc.length;l++)\"string\"\u003d\u003dtypeof c[l]\u0026\u0026c[l]\u0026\u0026a.push(c[l])}for(var c in t)if(\"string\"\u003d\u003dtypeof c){i.push(c),\"essential\"\u003d\u003dc\u0026\u00260;var p\u003dt[c];for(l\u003d0;l\u003cp.length;l++)\"string\"\u003d\u003dtypeof p[l]\u0026\u0026p[l]\u0026\u0026r.push(p[l]),\"essential\"\u003d\u003dc\u0026\u0026f++}i.length\u003e0\u0026\u0026(aGTM.d.consent.purposes\u003d\",\"+i.join(\",\")+\",\"),r.length\u003e0\u0026\u0026(aGTM.d.consent.services\u003d\",\"+r.join(\",\")+\",\");var g\u003d\"No Services\";r.length\u003e0\u0026\u0026r.length\u003d\u003da.length?g\u003d\"Consent full accepted\":r.length\u003e0\u0026\u0026r.length\u003d\u003df?g\u003d\"Consent declined\":r.length\u003e0\u0026\u0026r.length\u003ca.length?g\u003d\"Consent partially accepted\":r.length\u003e0\u0026\u0026(g\u003d\"Consent given by user\"),aGTM.d.consent.feedback\u003dg,aGTM.d.consent.hasResponse\u003d!0};",
            "displayValue": "Borlabs v2"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"!\u003dtypeof borlabsCookieConfig||\"object\"!\u003dtypeof borlabsCookieConfig.serviceGroups)return!1;var n\u003dborlabsCookieConfig.serviceGroups;if(\"object\"!\u003dtypeof BorlabsCookie)return!1;if(\"object\"!\u003dtypeof BorlabsCookie.Cookie._pluginCookie)return!1;var o\u003dBorlabsCookie.Cookie._pluginCookie;if(\"string\"!\u003dtypeof o.expires||!o.expires)return!1;if(\"object\"!\u003dtypeof o||\"object\"!\u003dtypeof o.consents)return!1;var s\u003do.consents;\"string\"\u003d\u003dtypeof o.uid\u0026\u0026(aGTM.d.consent.consent_id\u003do.uid);var t\u003d[],r\u003d[],i\u003d0,a\u003d[],l\u003d[],c\u003d0;for(var f in n)if(\"string\"\u003d\u003dtypeof f\u0026\u0026(r.push(f),n[f].serviceIds,n[f].serviceIds\u0026\u0026n[f].serviceIds.length\u003e0))for(var p\u003dn[f].serviceIds,g\u003d0;g\u003cp.length;g++)\"string\"\u003d\u003dtypeof p[g]\u0026\u0026p[g]\u0026\u0026l.push(p[g]);for(var f in s)if(\"string\"\u003d\u003dtypeof f){t.push(f),\"essential\"\u003d\u003df\u0026\u0026i++;var b\u003ds[f];for(g\u003d0;g\u003cb.length;g++)\"string\"\u003d\u003dtypeof b[g]\u0026\u0026b[g]\u0026\u0026a.push(b[g]),\"essential\"\u003d\u003df\u0026\u0026c++}t.length\u003e0\u0026\u0026(aGTM.d.consent.purposes\u003d\",\"+t.join(\",\")+\",\"),a.length\u003e0\u0026\u0026(aGTM.d.consent.services\u003d\",\"+a.join(\",\")+\",\");var d\u003d\"No Services\";a.length\u003e0\u0026\u0026a.length\u003d\u003dl.length?d\u003d\"Consent full accepted\":a.length\u003e0\u0026\u0026a.length\u003d\u003dc?d\u003d\"Consent declined\":a.length\u003e0\u0026\u0026a.length\u003cl.length?d\u003d\"Consent partially accepted\":a.length\u003e0\u0026\u0026(d\u003d\"Consent given by user\"),aGTM.d.consent.feedback\u003dd;var u\u003dJSON.parse(JSON.stringify(aGTM.d.consent));return u.borlabs_purposes_configured\u003dr,u.borlabs_services_configured\u003dl,u.borlabs_purposes_essential\u003di,u.borlabs_purposes_all\u003dr.length,u.borlabs_purposes_consented\u003dt.length,u.borlabs_services_essential\u003dc,u.borlabs_services_all\u003dl.length,u.borlabs_services_consented\u003da.length,window.borlabs_aData\u003du,aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Borlabs v3"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"!\u003dtypeof CCM||\"boolean\"!\u003dtypeof CCM.consent)return!1;var n\u003dCCM;if(\"object\"!\u003dtypeof n.acceptedEmbeddings)return!1;if(!n.consent\u0026\u0026n.consentRequired)return!1;for(var t\u003d[],o\u003dnull!\u003dn\u0026\u0026\"object\"\u003d\u003dtypeof n.acceptedEmbeddings\u0026\u0026null!\u003dn.acceptedEmbeddings?n.acceptedEmbeddings:{},a\u003d0;a\u003co.length;a++)\"string\"!\u003dtypeof o[a].name\u0026\u0026\"\"!\u003do[a].name||t.push(o[a].name.replace(\",\",\"\"));t.length\u003e0\u0026\u0026(t.sort(),aGTM.d.consent.services\u003d\",\"+t.join(\",\")+\",\");var c\u003d\"Consent available\";return c\u003d\"boolean\"\u003d\u003dtypeof n.fullConsentGiven\u0026\u0026!0\u003d\u003d\u003dn.fullConsentGiven?\"Consent full accepted\":\"Consent (partially or full) declined\",aGTM.d.consent.feedback\u003dc,\"string\"\u003d\u003dtypeof n.ucid\u0026\u0026(aGTM.d.consent.consent_id\u003dn.ucid),aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "CCM19"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(n){if(\"string\"!\u003dtypeof n||\"init\"!\u003dn\u0026\u0026\"update\"!\u003dn)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:n}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},aGTM.d.consent.req_ctr\u003daGTM.d.consent.req_ctr||0,aGTM.d.consent.blocked\u003d\"boolean\"\u003d\u003dtypeof aGTM.d.consent.blocked\u0026\u0026aGTM.d.consent.blocked,\"init\"\u003d\u003dn\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"!\u003dtypeof Clickskeks||\"function\"!\u003dtypeof Clickskeks.getCurrentAllowedConfig)return!1;var e\u003dClickskeks.getCurrentAllowedConfig(),t\u003d[],o\u003d0;for(var a in e)e[a]\u0026\u0026t.push(a),o++;if(!o)return!1;aGTM.d.consent.purposes\u003d\",\"+t.join(\",\")+\",\";var c\u003d\"Consent available\";return 0\u003d\u003do?c\u003d\"Consent declined\":o\u003d\u003dt.length?c\u003d\"Consent full accepted\":o\u003et.length\u0026\u0026(c\u003d\"Consent partially accepted\"),aGTM.d.consent.feedback\u003dc,aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Clickkeks"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},aGTM.d.consent.req_ctr\u003daGTM.d.consent.req_ctr||0,aGTM.d.consent.blocked\u003d\"boolean\"\u003d\u003dtypeof aGTM.d.consent.blocked\u0026\u0026aGTM.d.consent.blocked,\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"function\"!\u003dtypeof __cmp)return!(!aGTM.d.consent.blocked||!aGTM.d.consent.hasResponse)||(10\u003d\u003daGTM.d.consent.req_ctr++\u0026\u0026fetch(\"https://cdn.consentmanager.net/delivery/1x1.gif\").catch((function(e){aGTM.d.consent.blocked\u003d!0,aGTM.d.consent.feedback\u003d\"CMP is blocked\",aGTM.d.consent.hasResponse\u003d!0})),aGTM.d.consent.blocked);var n\u003d__cmp(\"getCMPData\");if(\"object\"!\u003dtypeof n)return!1;if(\"boolean\"!\u003dtypeof n.consentExists||!n.consentExists)return!1;if(\"boolean\"!\u003dtypeof n.userChoiceExists||!n.userChoiceExists)return!1;if(\"object\"!\u003dtypeof n.purposeConsents||\"object\"!\u003dtypeof n.purposesList||\"object\"!\u003dtypeof n.purposeLI)return!1;if(\"object\"!\u003dtypeof n.vendorConsents||\"object\"!\u003dtypeof n.vendorsList||\"object\"!\u003dtypeof n.vendorLI)return!1;for(var o\u003d0,s\u003d0,t\u003d[],c\u003d[],r\u003d0;r\u003cn.purposesList.length;r++)s++,n.purposeConsents[n.purposesList[r].id]||n.purposeLI[n.purposesList[r].id]?(c.push(n.purposesList[r].id),t.push(n.purposesList[r].name)):0,n.purposeConsents[n.purposesList[r].id]\u0026\u0026o++;var i\u003d[],a\u003d[];for(r\u003d0;r\u003cn.vendorsList.length;r++)s++,n.vendorConsents[n.vendorsList[r].id]||n.vendorLI[n.vendorsList[r].id]?(a.push(n.vendorsList[r].id),i.push(n.vendorsList[r].name)):0,n.vendorConsents[n.vendorsList[r].id]\u0026\u0026o++;aGTM.d.consent.purposes\u003d\",\"+t.join(\",\")+\",\",aGTM.d.consent.purposeIDs\u003d\",\"+c.join(\",\")+\",\",aGTM.d.consent.vendors\u003d\",\"+i.join(\",\")+\",\",aGTM.d.consent.vendorIDs\u003d\",\"+a.join(\",\")+\",\";var d\u003d\"Consent available\";return s\u003d\u003do?d\u003d\"Consent full accepted\":s\u0026\u0026!o?d\u003d\"Consent declined\":s\u0026\u0026o\u003cs\u0026\u0026(d\u003d\"Consent partially accepted\"),aGTM.d.consent.feedback\u003dd,\"string\"\u003d\u003dtypeof n.consentstring\u0026\u0026(aGTM.d.consent.consent_id\u003dn.consentstring),aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Consentmanager"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(n){if(\"string\"!\u003dtypeof n||\"init\"!\u003dn\u0026\u0026\"update\"!\u003dn)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:n}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003dn\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"!\u003dtypeof Cookiebot)return!1;var e\u003dCookiebot;if(\"boolean\"!\u003dtypeof e.hasResponse||\"object\"!\u003dtypeof e.consent)return!1;if(!e.hasResponse)return!1;var o\u003daGTM.c.purposes?aGTM.c.purposes.split(\",\"):[],t\u003d0,a\u003d0;for(k in e.consent)\"stamp\"!\u003dk\u0026\u0026\"method\"!\u003dk\u0026\u0026\"boolean\"\u003d\u003dtypeof e.consent[k]\u0026\u0026(a++,e.consent[k]\u0026\u0026(t++,o.push(k)));aGTM.d.consent.purposes\u003do.length\u003e0?\",\"+o.join(\",\")+\",\":\"\";var s\u003d\"Consent available\";return 0\u003d\u003da?s\u003d\"No purposes available\":t\u003ca?s\u003d\"Consent (partially or full) declined\":t\u003e\u003da\u0026\u0026(s\u003d\"Consent accepted\"),aGTM.d.consent.feedback\u003ds,\"string\"\u003d\u003dtypeof e.consentID\u0026\u0026(aGTM.d.consent.consent_id\u003de.consentID),aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Cookiebot"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"!\u003dtypeof CookieFirst||\"boolean\"!\u003dtypeof CookieFirst.hasConsented)return!1;var n\u003dCookieFirst;if(\"object\"!\u003dtypeof n.consent||\"object\"!\u003dtypeof n.acceptedServices)return!1;if(!n.hasConsented)return!1;var o\u003d[],t\u003dn.consent?n.consent:{};for(k in t)\"string\"\u003d\u003dtypeof k\u0026\u0026\"boolean\"\u003d\u003dtypeof t[k]\u0026\u0026t[k]\u0026\u0026(o.push(k.replace(\",\",\"\")));var a\u003d[],s\u003dn.acceptedServices?n.acceptedServices:{},i\u003d0,r\u003d0;for(k in s)\"string\"\u003d\u003dtypeof k\u0026\u0026\"boolean\"\u003d\u003dtypeof s[k]\u0026\u0026(r++,s[k]\u0026\u0026(i++,a.push(k.replace(\",\",\"\"))));o.length\u003e0\u0026\u0026(o.sort(),aGTM.d.consent.purposes\u003d\",\"+o.join(\",\")+\",\"),a.length\u003e0\u0026\u0026(a.sort(),aGTM.d.consent.services\u003d\",\"+a.join(\",\")+\",\");var c\u003d\"Consent available\";return r\u003e\u003di?c\u003d\"Consent (partially or full) declined\":r\u003d\u003di\u0026\u0026(c\u003d\"Consent full accepted\"),aGTM.d.consent.feedback\u003dc,\"string\"\u003d\u003dtypeof n.visitorId\u0026\u0026(aGTM.d.consent.consent_id\u003dn.visitorId),aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "CookieFirst"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"!\u003dtypeof klaro||\"function\"!\u003dtypeof klaro.getManager)return!1;var n\u003dklaro.getManager();if(\"boolean\"!\u003dtypeof n.confirmed||!n.confirmed)return!1;if(\"object\"!\u003dtypeof n.config||\"object\"!\u003dtypeof n.config.services)return!1;for(var o\u003d{},t\u003dn.config.services,s\u003d0;s\u003ct.length;s++)if(\"string\"\u003d\u003dtypeof t[s].name){var a\u003d[],r\u003dt[s].name;if(\"object\"\u003d\u003dtypeof t[s].purposes\u0026\u0026\"number\"\u003d\u003dtypeof t[s].purposes.length\u0026\u0026t[s].purposes.length\u003e0){a\u003dt[s].purposes;for(var c\u003d0;c\u003ca.length;c++){var f\u003da[c];\"object\"\u003d\u003dtypeof o[f]?o[f].push(r):o[f]\u003d[r]}}}if(\"object\"!\u003dtypeof n.consents||!n.consents)return!1;var i\u003daGTM.c.purposes?aGTM.c.purposes.split(\",\"):[];for(var p in o){0;var l\u003d!0;for(s\u003d0;s\u003co[p].length;s++){var M\u003do[p];\"boolean\"!\u003dtypeof n.consents[M]||n.consents[M]||(l\u003d!1)}l\u0026\u0026i.push(p)}var G\u003daGTM.c.services?aGTM.c.services.split(\",\"):[],T\u003d0;for(var M in n.consents)T++,\"boolean\"\u003d\u003dtypeof n.consents[M]\u0026\u0026n.consents[M]\u0026\u0026G.push(M);aGTM.d.consent.purposes\u003di.length\u003e0?\",\"+i.join(\",\")+\",\":\"\",aGTM.d.consent.services\u003dG.length\u003e0?\",\"+G.join(\",\")+\",\":\"\";var g\u003d\"Consent available\";return 0\u003d\u003dT?g\u003d\"No services available\":0\u003d\u003dG.length\u0026\u0026T\u003e0?g\u003d\"Consent declined\":G.length\u003d\u003dT?g\u003d\"Consent full accepted\":G.length\u003e0\u0026\u0026G.length\u003cT\u0026\u0026(g\u003d\"Consent partially accepted\"),aGTM.d.consent.feedback\u003dg,aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Klaro!"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;var n\u003d\"co\";n+\u003d\"ok\",n+\u003d\"ie\";var t\u003dnew RegExp(\"cc_\"+n+\"\u003d([^;]+)\");try{var o\u003ddocument,s\u003dt.exec(o[n])}catch(e){}if(void 0\u003d\u003d\u003ds)s\u003d\"\";else\"string\"!\u003dtypeof(s\u003dnull!\u003ds?s[1]:\"\")\u0026\u0026(s\u003ds.toString());if(!s)return g;try{var r\u003dJSON.parse(decodeURIComponent(s))}catch(e){return console.log(\"Error by Consent Check: \"+e.message),!1}if(\"object\"!\u003dtypeof r||\"object\"!\u003dtypeof r.categories||\"object\"!\u003dtypeof r.services)return!1;for(var a\u003d[],c\u003d[],i\u003d0,f\u003d0;f\u003cr.categories.length;f++)\"string\"\u003d\u003dtypeof r.categories[f]\u0026\u0026r.categories[f]\u0026\u0026a.push(r.categories[f]);for(k in r.services)if(\"string\"\u003d\u003dtypeof k\u0026\u0026\"object\"\u003d\u003dtypeof r.services[k]){var g\u003dr.services[k];for(f\u003d0;f\u003cg.length;f++)\"string\"\u003d\u003dtypeof g[f]\u0026\u0026g[f]\u0026\u0026(c.push(g[f]),\"necessary\"!\u003dk\u0026\u0026\"essential\"!\u003dk||i++)}a.length\u003e0\u0026\u0026(a.sort(),aGTM.d.consent.purposes\u003d\",\"+a.join(\",\")+\",\"),c.length\u003e0\u0026\u0026(c.sort(),aGTM.d.consent.services\u003d\",\"+c.join(\",\")+\",\");var p\u003d\"No Services\";return c.length\u003e0\u0026\u0026c.length\u003d\u003di?p\u003d\"Consent declined\":c.length\u003e0\u0026\u0026c.length\u003ei\u0026\u0026(p\u003d\"Consent accepted\"),aGTM.d.consent.feedback\u003dp,aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Magento CC Cookie"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"!\u003dtypeof localStorage||!localStorage)return!1;if(\"object\"!\u003dtypeof sessionStorage||!sessionStorage)return!1;var n\u003dlocalStorage.getItem(\"consent\");if(\"string\"!\u003dtypeof n||!n)return!1;var t\u003dJSON.parse(n);if(\"object\"!\u003dtypeof t||!t||!t.created||!t.services)return!1;var o\u003dsessionStorage.getItem(\"consent-cache\");if(\"string\"!\u003dtypeof o||!o)return!1;var s\u003dJSON.parse(o);if(\"object\"!\u003dtypeof s||!s||!s.categories)return!1;for(var a\u003d[],r\u003d[],c\u003d[],i\u003d0;i\u003cs.categories.length;i++){var d\u003ds.categories[i];\"object\"\u003d\u003dtypeof d\u0026\u0026d\u0026\u0026d.name\u0026\u0026d.id\u0026\u0026(d.required\u0026\u0026c.push(d.name),(d.checked||d.required)\u0026\u0026(a.push(d.name),r.push(d.id)))}var f\u003d[],p\u003d0,g\u003d[];for(i\u003d0;i\u003ct.services.length;i++){var G\u003dt.services[i];\"object\"\u003d\u003dtypeof G\u0026\u0026G\u0026\u0026G.name\u0026\u0026G.id\u0026\u0026(p++,G.hasConsent\u0026\u0026(f.push(G.name),g.push(G.id)))}a.length\u003e0\u0026\u0026(a.sort(),r.sort(),c.sort()),aGTM.d.consent.purposes\u003d\",\"+a.join(\",\")+\",\",aGTM.d.consent.purposes_ids\u003d\",\"+r.join(\",\")+\",\",aGTM.d.consent.purposes_essential\u003d\",\"+c.join(\",\")+\",\",f.length\u003e0\u0026\u0026(f.sort(),g.sort()),aGTM.d.consent.services\u003d\",\"+f.join(\",\")+\",\",aGTM.d.consent.services_ids\u003d\",\"+g.join(\",\")+\",\",aGTM.d.consent.feedback\u003d\"Consent given by user\",f.length\u003e0\u0026\u0026f.length\u003d\u003dp?aGTM.d.consent.feedback\u003d\"Consent full accepted\":f.length\u003e0\u0026\u0026f.length\u003cp?aGTM.d.consent.feedback\u003d\"Consent partially accepted\":0\u003d\u003df.length\u0026\u0026p\u003e0\u0026\u0026(aGTM.d.consent.feedback\u003d\"Consent declined\"),aGTM.d.consent.hasResponse\u003d!0};",
            "displayValue": "Matomo Consent Check"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(n){if(\"string\"!\u003dtypeof n||\"init\"!\u003dn\u0026\u0026\"update\"!\u003dn)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:n}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003dn\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"!\u003dtypeof Optanon||\"function\"!\u003dtypeof Optanon.GetDomainData)return!1;var t\u003dOptanon.GetDomainData();if(\"object\"!\u003dtypeof t.ConsentIntegrationData||\"object\"!\u003dtypeof t.ConsentIntegrationData.consentPayload||\"object\"!\u003dtypeof t.ConsentIntegrationData.consentPayload.customPayload||\"object\"!\u003dtypeof t.ConsentIntegrationData.consentPayload.purposes||\"object\"!\u003dtypeof t.ConsentModel||\"string\"!\u003dtypeof t.ConsentModel.Name)return!1;var e\u003dt.ConsentIntegrationData.consentPayload;if(\"number\"!\u003dtypeof e.customPayload.Interaction)return!1;if(aGTM.d.consent.interactions\u003de.customPayload.Interaction,\"object\"!\u003dtypeof e.dsDataElements||\"string\"!\u003dtypeof e.dsDataElements.Country)return!1;aGTM.d.consent.consent_model\u003dt.ConsentModel.Name,\"string\"\u003d\u003dtypeof t.cctId\u0026\u0026(aGTM.d.consent.consent_id\u003dt.cctId),\"object\"\u003d\u003dtypeof e.dsDataElements\u0026\u0026\"string\"\u003d\u003dtypeof e.dsDataElements.InteractionType\u0026\u0026(aGTM.d.consent.interaction_type\u003de.dsDataElements.InteractionType),\"object\"\u003d\u003dtypeof e.dsDataElements\u0026\u0026\"string\"\u003d\u003dtypeof e.dsDataElements.Country\u0026\u0026(aGTM.d.consent.country\u003de.dsDataElements.Country);for(var o\u003d{},a\u003d0,s\u003d{},r\u003d0,p\u003d0,c\u003d{},i\u003d0;i\u003ce.purposes.length;i++)c[e.purposes[i].Id]\u003de.purposes[i].TransactionType;for(i\u003d0;i\u003ct.Groups.length;i++)\"string\"\u003d\u003dtypeof c[t.Groups[i].PurposeId]\u0026\u0026(\"NO_CHOICE\"\u003d\u003dc[t.Groups[i].PurposeId]\u0026\u0026(s[t.Groups[i].OptanonGroupId]\u003dt.Groups[i].GroupName.replace(/[^\\w\\d _-]+/g,\"\"),r++),\"NO_CHOICE\"!\u003dc[t.Groups[i].PurposeId]\u0026\u0026\"CONFIRMED\"!\u003dc[t.Groups[i].PurposeId]||(o[t.Groups[i].OptanonGroupId]\u003dt.Groups[i].GroupName.replace(/[^\\w\\d _-]+/g,\"\"),a++),p++);var d\u003d[],f\u003d[];for(k in o)d.push(k),f.push(o[k]);return aGTM.d.consent.purposeIDs\u003d\",\"+d.join(\",\")+\",\",aGTM.d.consent.purposes\u003d\",\"+f.join(\",\")+\",\",aGTM.d.consent.interaction_type?aGTM.d.consent.feedback\u003dtrConfig.cmp.interaction_type:aGTM.d.consent.feedback\u003dp\u003d\u003dr?\"No OptIn Categories available\":a\u003d\u003dp?\"Consent full accepted\":a\u003d\u003dr?\"Consent declined\":a\u003cp?\"Consent partially accepted\":\"Consent given\",aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "OneTrust CookiePro"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;var n\u003daGTM.c.purposes?aGTM.c.purposes.split(\",\"):[];if(\"object\"!\u003dtypeof cc||\"function\"!\u003dtypeof cc.getUserPreferences)return!1;var t\u003dcc.getUserPreferences(),a\u003dt.accept_type,o\u003dt.accepted_categories,c\u003dt.rejected_categories;if(\"string\"!\u003dtypeof a||\"object\"!\u003dtypeof o||\"object\"!\u003dtypeof c)return!1;for(var s\u003do.length,r\u003ds+c.length,f\u003d0;f\u003cs;f++)\"string\"\u003d\u003dtypeof o[f]\u0026\u0026n.push(o[f]);aGTM.d.consent.purposes\u003dn.length\u003e0?\",\"+n.join(\",\")+\",\":\"\";var i\u003d\"Consent available\";return 0\u003d\u003dr?i\u003d\"No purposes available\":s\u003cr?i\u003d\"Consent (partially) declined\":\"all\"\u003d\u003da\u0026\u0026(i\u003d\"Consent full accepted\"),aGTM.d.consent.feedback\u003di,aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Orestbida Cookie Consent"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},aGTM.d.consent.req_ctr\u003daGTM.d.consent.req_ctr||0,aGTM.d.consent.blocked\u003d\"boolean\"\u003d\u003dtypeof aGTM.d.consent.blocked\u0026\u0026aGTM.d.consent.blocked,\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;var n\u003dnew RegExp(\"acris_cookie_acc\u003d([^;]+)\");try{var o\u003ddocument;a\u003dn.exec(o.cookie)}catch(e){}if(void 0\u003d\u003d\u003da)var a\u003d\"\";else a\u003dnull!\u003da?unescape(a[1]):\"\";if(!a)return!1;n\u003dnew RegExp(\"acris_cookie_first_activated\u003d([^;]+)\");try{o\u003ddocument;t\u003dn.exec(o.cookie)}catch(e){}if(void 0\u003d\u003d\u003dt)var t\u003d\"\";else t\u003dnull!\u003dt?decodeURI(t[1]):\"\";if(!t)return!1;var i\u003d[],c\u003dt.split(\"|\").filter(Boolean);if(!c.length)return!1;for(var s\u003d{11:\"Google Analytics\",14:\"Google Adsense\",15:\"Google Ads Conversion Tracking\",18:\"Awin Affiliate Marketing\",49:\"Facebook Pixel\",230:\"Criteo Retargeting\",287:\"Emarsys\",446:\"Bing Ads\"},r\u003d0;r\u003cc.length;r++)i.push(s[c[r]]?s[c[r]]:c[r]);return aGTM.d.consent.services\u003d\",\"+i.join(\",\")+\",\",aGTM.d.consent.serviceIDs\u003d\",\"+c.join(\",\")+\",\",aGTM.d.consent.feedback\u003d\"Consent available\",aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Shopware Acris Cookie"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(n){if(\"string\"!\u003dtypeof n||\"init\"!\u003dn\u0026\u0026\"update\"!\u003dn)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:n}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003dn\u0026\u0026aGTM.d.consent.hasResponse)return!0;var e\u003d\"co\";e+\u003d\"ok\",e+\u003d\"ie\";var t\u003dnew RegExp(\"Consent\u003d([^;]+)\");try{var a\u003ddocument,o\u003dt.exec(a[e])}catch(n){}if(void 0\u003d\u003d\u003do)o\u003d\"\";else\"string\"!\u003dtypeof(o\u003dnull!\u003do?o[1]:\"\")\u0026\u0026(o\u003do.toString());if(!o)return!1;var s\u003d\"string\"\u003d\u003dtypeof o\u0026\u0026o.length\u003e0\u0026\u0026/..+/.test(o);return aGTM.d.consent.purposes\u003ds?\",all,\":\"\",aGTM.d.consent.services\u003ds?\",all,\":\"\",aGTM.d.consent.vendors\u003ds?\",all,\":\"\",aGTM.d.consent.feedback\u003ds?\"Consent accepted\":\"Consent declined\",aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Simple Cookie RegEx Check"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"function\"!\u003dtypeof __tcfapi)return!1;var a\u003d!1,n\u003dnull;__tcfapi(\"getCustomVendorConsents\",2,(function(e,o){a\u003do,n\u003de}));if(\"boolean\"!\u003dtypeof a||!a)return!1;if(\"object\"!\u003dtypeof n||!n)return!1;if(\"boolean\"!\u003dtypeof n.newUser||n.newUser)return!1;if(\"object\"!\u003dtypeof n.grants||!n.grants)return!1;var o\u003daGTM.c.purposes?aGTM.c.purposes.split(\",\"):[],t\u003d[],r\u003d0,s\u003d{\"64480473796ea90689e58702\":\"Store and/or access information on a device\",\"64480473796ea90689e58722\":\"Use limited data to select advertising\",\"64480473796ea90689e58740\":\"Create profiles for personalised advertising\",\"64480473796ea90689e5875e\":\"Use profiles to select personalised advertising\",\"64480473796ea90689e5877c\":\"Create profiles to personalise content\",\"64480473796ea90689e58782\":\"Use profiles to select personalised content\",\"64480473796ea90689e58788\":\"Measure advertising performance\",\"64480473796ea90689e587a7\":\"Measure content performance\",\"64480473796ea90689e587ac\":\"Understand audiences through statistics or combinations of data from different sources\",\"64480473796ea90689e587ca\":\"Develop and improve services\",\"654b93ba18140306b70499b7\":\"Use limited data to select content\",\"64ff0f9f653e3805a8662e8c\":\"Functional\",\"64ff0f9f653e3805a8662e95\":\"Data Share\",\"64ff0f9f653e3805a8662e9b\":\"Social Media\",\"654b9434a5bdb40569d39098\":\"Data use for Identification\",\"64480473796ea90689e58722\":\"Use limited data to select advertising\",\"64480473796ea90689e58788\":\"Measure advertising performance\",\"64480473796ea90689e587a7\":\"Measure content performance\",\"64480473796ea90689e587ac\":\"Understand audiences through statistics or combinations of data from different sources\",\"64480473796ea90689e587ca\":\"Develop and improve services\"},c\u003daGTM.c.vendors?aGTM.c.vendors.split(\",\"):[],i\u003d[],f\u003d0,d\u003d{\"5e7e1298b8e05c4854221be9\":\"Google Inc.\",\"5ee7add94c24944fdb5c5ac6\":\"Hotjar\",\"5e717c8e69966540e4554f05\":\"Instagram\",\"5e839a38b8e05c4e491e738e\":\"Pinterest Inc.\",\"64ad94508c172204ffdb22a4\":\"plista GmbH\",\"5e7ac3fae30e7d1bc1ebf5e8\":\"YouTube\",\"5e542b3a4cd8884eb41b5a72\":\"Google Analytics\",\"63657be8bcb5be04a169758e\":\"Google Maps\",\"5f0f1187b8e05c109c2b8464\":\"JW Player\",\"5e952f6107d9d20c88e7c975\":\"Google Tag Manager\",\"5e7ced57b8e05c5a7d171cda\":\"Adform A/S\",\"62d1372b293cdf1ca87a36f0\":\"CleverPush GmbH\",\"5e98e7f1b8e05c111d01b462\":\"Criteo SA\",\"5ed6aeb2b8e05c2bbe33f4fa\":\"EASYmedia GmbH\",\"5f1aada6b8e05c306c0597d7\":\"Google Advertising Products\",\"5f48d229b8e05c60a307ad97\":\"Kameleoon SAS\",\"5e7ced57b8e05c485246ccde\":\"Outbrain UK Ltd\",\"5ee15bc6b8e05c164c398ae3\":\"RTB House S.A.\",\"5f23e826b8e05c0c0d4fdb8f\":\"Sourcepoint Technologies Inc. (non-CMP)\",\"5e37fc3e56a5e6615502f9c4\":\"Taboola Europe Limited\",\"5efefe25b8e05c109c2b8324\":\"The Reach Group GmbH\",\"5e865b36b8e05c48537f60a7\":\"The UK Trade Desk Ltd\",\"5e716fc09a0b5040d575080f\":\"Facebook Inc.\"};for(k in n.grants){var b\u003dJSON.parse(JSON.stringify(n.grants[k]));f++;var l\u003d!0;if(\"object\"\u003d\u003dtypeof b.purposeGrants)for(p in b.purposeGrants){for(var u\u003d!1,G\u003d0;G\u003ct.length;G++)t[G]\u003d\u003d\u003dp\u0026\u0026(u\u003d!0);u||(r++,\"boolean\"\u003d\u003dtypeof b.purposeGrants[p]\u0026\u0026b.purposeGrants[p]?(t.push(p),o.push(\"string\"\u003d\u003dtypeof s[p]?s[p]:p)):\"boolean\"!\u003dtypeof b.purposeGrants[p]||b.purposeGrants[p]||(l\u003d!1))}\"boolean\"\u003d\u003dtypeof b.vendorGrant\u0026\u0026b.vendorGrant\u0026\u0026l\u0026\u0026(i.push(k),c.push(\"string\"\u003d\u003dtypeof d[k]?d[k]:k))}var M\u003do.map((function(e){return e.replace(\",\",\"\")})),T\u003dc.map((function(e){return e.replace(\",\",\"\")}));return aGTM.d.consent\u003daGTM.d.consent||{},aGTM.d.consent.purposes\u003d\",\"+M.join(\",\")+\",\",aGTM.d.consent.purposeIDs\u003d\",\"+t.join(\",\")+\",\",aGTM.d.consent.vendors\u003d\",\"+T.join(\",\")+\",\",aGTM.d.consent.vendorIDs\u003d\",\"+i.join(\",\")+\",\",aGTM.d.consent.feedback\u003d\"Consent available\",c.length\u003c\u003df\u0026\u0026o.length\u003c\u003dr?aGTM.d.consent.feedback\u003d\"Consent (partially) declined\":c.length\u003d\u003df\u0026\u0026o.length\u003d\u003dr\u0026\u0026(aGTM.d.consent.feedback\u003d\"Consent full accepted\"),aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Sourcepoint"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(n){if(\"string\"!\u003dtypeof n||\"init\"!\u003dn\u0026\u0026\"update\"!\u003dn)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:n}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003dn\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"!\u003dtypeof localStorage||!localStorage)return!1;var e\u003dlocalStorage.getItem(\"consentPermission\");if(\"string\"!\u003dtypeof e||!e)return!1;if(\"true\"!\u003de)return!1;var t\u003d[];\"true\"\u003d\u003de\u0026\u0026t.push(\"Consent\"),aGTM.d.consent.purposes\u003d\",\"+t.join(\",\")+\",\",aGTM.d.consent.feedback\u003d\"Consent accepted\",aGTM.d.consent.hasResponse\u003d!0};",
            "displayValue": "Tramino"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"!\u003dtypeof __ucCmp||\"object\"!\u003dtypeof __ucCmp.cmpController||\"object\"!\u003dtypeof __ucCmp.cmpController.consent||\"object\"!\u003dtypeof __ucCmp.cmpController.dps||\"object\"!\u003dtypeof __ucCmp.cmpController.dps.categories||\"object\"!\u003dtypeof __ucCmp.cmpController.dps.services)return!1;if(\"boolean\"!\u003dtypeof __ucCmp.cmpController.consent.required||__ucCmp.cmpController.consent.required)return!1;var n\u003d__ucCmp.cmpController.dps.categories,o\u003d[],t\u003d0;for(var s in n)if(n.hasOwnProperty(s)\u0026\u0026-1\u003d\u003d\u003do.indexOf(s)){t++;var c\u003dn[s].state;\"ALL_ACCEPTED\"!\u003d\u003dc\u0026\u0026\"SOME_ACCEPTED\"!\u003d\u003dc||o.push(s)}var r\u003d__ucCmp.cmpController.dps.services,i\u003d[],a\u003d[],p\u003d0,l\u003d0;for(var d in r)if(r.hasOwnProperty(d)){p++;var f\u003dr[d];if(f.essential\u0026\u0026-1\u003d\u003d\u003da.indexOf(d)\u0026\u0026l++,f.consent\u0026\u0026f.consent.given\u0026\u0026(-1\u003d\u003d\u003di.indexOf(f.name)\u0026\u0026i.push(f.name),-1\u003d\u003d\u003da.indexOf(d)\u0026\u0026a.push(d)),f.subservices)for(var u in f.subservices)if(f.subservices.hasOwnProperty(u)){p++;var _\u003df.subservices[u];_.essential\u0026\u0026-1\u003d\u003d\u003da.indexOf(u)\u0026\u0026l++,_.consent\u0026\u0026_.consent.given\u0026\u0026(i.push(_.name),a.push(u))}}o.length\u003e0\u0026\u0026(aGTM.d.consent.purposes\u003d\",\"+o.join(\",\")+\",\"),i.length\u003e0\u0026\u0026(aGTM.d.consent.services\u003d\",\"+i.join(\",\")+\",\"),a.length\u003e0\u0026\u0026(aGTM.d.consent.serviceIDs\u003d\",\"+a.join(\",\")+\",\");var C\u003d\"Consent available\";i.length\u003e0\u0026\u0026i.length\u003d\u003dp?C\u003d\"Consent full accepted\":i.length\u003e0\u0026\u0026i.length\u003el?C\u003d\"Consent partially accepted\":i.length\u003e0\u0026\u0026i.length\u003d\u003dl?C\u003d\"Consent declined\":0\u003d\u003di.length\u0026\u0026(C\u003d\"No Consent configured\"),aGTM.d.consent.feedback\u003dC,aGTM.d.consent.consent_id\u003d\"\",\"object\"\u003d\u003dtypeof __ucCmp.cmpController.consent\u0026\u0026\"string\"\u003d\u003dtypeof __ucCmp.cmpController.consent.controllerId\u0026\u0026(aGTM.d.consent.consent_id\u003d__ucCmp.cmpController.consent.controllerId);var T\u003dJSON.parse(JSON.stringify(aGTM.d.consent));return T.purposes\u003do,T.purpose_counter\u003dt,T.services\u003di,T.service_ids\u003da,T.service_counter\u003dp,T.service_essential_counter\u003dl,T.feedback\u003dC,T.consent_id\u003daGTM.d.consent.consent_id,window.usercentrics_aData\u003dT,aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Usercentrics v2"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(n){if(\"string\"!\u003dtypeof n||\"init\"!\u003dn\u0026\u0026\"update\"!\u003dn)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:n}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003dn\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(\"object\"!\u003dtypeof __ucCmp||\"object\"!\u003dtypeof __ucCmp.cmpController||\"object\"!\u003dtypeof __ucCmp.cmpController.consent||\"object\"!\u003dtypeof __ucCmp.cmpController.dps||\"object\"!\u003dtypeof __ucCmp.cmpController.dps.categories||\"object\"!\u003dtypeof __ucCmp.cmpController.dps.services)return!1;if(\"boolean\"!\u003dtypeof __ucCmp.cmpController.consent.required||__ucCmp.cmpController.consent.required)return!1;var e\u003d__ucCmp.cmpController.dps.categories,t\u003d[];for(var o in e)if(e.hasOwnProperty(o)\u0026\u0026-1\u003d\u003d\u003dt.indexOf(o)){0;var c\u003de[o].state;\"ALL_ACCEPTED\"!\u003d\u003dc\u0026\u0026\"SOME_ACCEPTED\"!\u003d\u003dc||t.push(o)}var s\u003d__ucCmp.cmpController.dps.services,r\u003d[],l\u003d[],a\u003d0,p\u003d0;for(var i in s)if(s.hasOwnProperty(i)){a++;var u\u003ds[i];if(u.essential\u0026\u0026-1\u003d\u003d\u003dl.indexOf(i)\u0026\u0026p++,u.consent\u0026\u0026u.consent.given\u0026\u0026(-1\u003d\u003d\u003dr.indexOf(u.name)\u0026\u0026r.push(u.name),-1\u003d\u003d\u003dl.indexOf(i)\u0026\u0026l.push(i)),u.subservices)for(var d in u.subservices)if(u.subservices.hasOwnProperty(d)){a++;var C\u003du.subservices[d];C.essential\u0026\u0026-1\u003d\u003d\u003dl.indexOf(d)\u0026\u0026p++,C.consent\u0026\u0026C.consent.given\u0026\u0026(r.push(C.name),l.push(d))}}t.length\u003e0\u0026\u0026(aGTM.d.consent.purposes\u003d\",\"+t.join(\",\")+\",\"),r.length\u003e0\u0026\u0026(aGTM.d.consent.services\u003d\",\"+r.join(\",\")+\",\"),l.length\u003e0\u0026\u0026(aGTM.d.consent.serviceIDs\u003d\",\"+l.join(\",\")+\",\");var _\u003d\"Consent available\";r.length\u003e0\u0026\u0026r.length\u003d\u003da?_\u003d\"Consent full accepted\":r.length\u003e0\u0026\u0026r.length\u003ep?_\u003d\"Consent partially accepted\":r.length\u003e0\u0026\u0026r.length\u003d\u003dp?_\u003d\"Consent declined\":0\u003d\u003dr.length\u0026\u0026(_\u003d\"No Consent configured\"),aGTM.d.consent.feedback\u003d_,aGTM.d.consent.consent_id\u003d\"\",\"string\"\u003d\u003dtypeof __ucCmp.cmpController.consent.controllerId\u0026\u0026(aGTM.d.consent.consent_id\u003d__ucCmp.cmpController.consent.controllerId),\"object\"\u003d\u003dtypeof __ucCmp.cmpController.consent.setting\u0026\u0026__ucCmp.cmpController.consent.setting\u0026\u0026(aGTM.d.consent.cmp_id\u003d__ucCmp.cmpController.consent.setting.id||null,aGTM.d.consent.legal\u003d__ucCmp.cmpController.consent.setting.legal||null),aGTM.d.consent.language\u003d__ucCmp.cmpController.consent.language||null,aGTM.d.consent.required\u003d__ucCmp.cmpController.consent.required||null,aGTM.d.consent.status\u003d__ucCmp.cmpController.consent.status||null,aGTM.d.consent.type\u003d__ucCmp.cmpController.consent.type||null,aGTM.d.consent.updatedBy\u003d__ucCmp.cmpController.consent.updatedBy||null,aGTM.d.consent.version\u003d__ucCmp.cmpController.consent.version||null;var m\u003dJSON.parse(JSON.stringify(aGTM.d.consent));return m.hasResponse\u003d!0,window.usercentrics_aData\u003dm,aGTM.d.consent.hasResponse\u003d!0,\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"m2\",JSON.parse(JSON.stringify(aGTM.d.consent))),!0};",
            "displayValue": "Usercentrics v3 and newer Cookiebot"
          },
          {
            "value": "aGTM.f.consent_check\u003dfunction(e){if(\"string\"!\u003dtypeof e||\"init\"!\u003de\u0026\u0026\"update\"!\u003de)return\"function\"\u003d\u003dtypeof aGTM.f.log\u0026\u0026aGTM.f.log(\"e10\",{action:e}),!1;if(aGTM.d.consent\u003daGTM.d.consent||{},\"init\"\u003d\u003de\u0026\u0026aGTM.d.consent.hasResponse)return!0;if(window.Shopify.loadFeatures([{name:\"consent-tracking-api\",version:\"0.1\"}],(e\u003d\u003e{})),\"object\"!\u003dtypeof Shopify||\"object\"!\u003dtypeof Shopify.customerPrivacy||\"function\"!\u003dtypeof Shopify.customerPrivacy.currentVisitorConsent||\"function\"!\u003dtypeof Shopify.customerPrivacy.getTrackingConsent)return!1;var n\u003dShopify.customerPrivacy.getTrackingConsent();if(\"string\"!\u003dtypeof n||\"yes\"!\u003dn\u0026\u0026\"no\"!\u003dn)return!1;var o\u003dShopify.customerPrivacy.currentVisitorConsent();o.sale_of_data||\"function\"!\u003dtypeof Shopify.customerPrivacy.saleOfDataAllowed||(o.sale_of_data\u003dShopify.customerPrivacy.saleOfDataAllowed()?\"yes\":\"no\");var t\u003d!0;\"function\"!\u003dtypeof Shopify.customerPrivacy.shouldShowBanner||Shopify.customerPrivacy.shouldShowBanner()||(t\u003d!1);var a\u003d[],i\u003d0;for(var c in o)i++,\"yes\"!\u003d\u003do[c]\u0026\u0026t||a.push(c);a.length\u003e0\u0026\u0026a.sort(),aGTM.d.consent.purposes\u003d\",essential,\"+a.join(\",\")+\",\",\"function\"\u003d\u003dtypeof Shopify.customerPrivacy.consentId\u0026\u0026(aGTM.d.consent.consent_id\u003dShopify.customerPrivacy.consentId()),\"function\"\u003d\u003dtypeof Shopify.customerPrivacy.getRegion\u0026\u0026(aGTM.d.consent.region\u003dShopify.customerPrivacy.getRegion()),aGTM.d.consent.feedback\u003d\"Consent given by user\",a.length\u003e0\u0026\u0026a.length\u003d\u003di?aGTM.d.consent.feedback\u003d\"Consent full accepted\":a.length\u003e0\u0026\u0026a.length\u003ci?aGTM.d.consent.feedback\u003d\"Consent partially accepted\":0\u003d\u003da.length\u0026\u0026i\u003e0\u0026\u0026(aGTM.d.consent.feedback\u003d\"Consent declined\"),aGTM.d.consent.hasResponse\u003d!0};",
            "displayValue": "Shopify Consent Tool"
          }
        ],
        "simpleValueType": true,
        "notSetText": "Not set"
      },
      {
        "type": "PARAM_TABLE",
        "name": "consent",
        "displayName": "Consent Check Conditions",
        "paramTableColumns": [
          {
            "param": {
              "type": "SELECT",
              "name": "consent_type",
              "displayName": "Type",
              "macrosInSelect": true,
              "selectItems": [
                {
                  "value": "gtmPurposes",
                  "displayValue": "gtmPurposes"
                },
                {
                  "value": "gtmServices",
                  "displayValue": "gtmServices"
                },
                {
                  "value": "gtmVendors",
                  "displayValue": "gtmVendors"
                }
              ],
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "TEXT",
              "name": "consent_value",
              "displayName": "Value",
              "simpleValueType": true
            },
            "isUnique": false
          }
        ],
        "newRowButtonText": "Add Consent Check",
        "notSetText": "Add at least one consition, otherwise no consent check will run.",
        "help": "Setup the Consent Conditions. Add at least one consition, otherwise no consent check will run."
      },
      {
        "type": "GROUP",
        "name": "cmp_other",
        "displayName": "Advanced CMP Settings",
        "groupStyle": "ZIPPY_OPEN_ON_PARAM",
        "subParams": [
          {
            "type": "CHECKBOX",
            "name": "sendConsentEvent",
            "checkboxText": "Send a dataLayer Event (\"aGTM_consent\") for Consent Data.",
            "simpleValueType": true,
            "defaultValue": false,
            "help": "If ticked, a separate Consent Event named \"aGTM_consent\" will be fired (after Consent Info is available)"
          },
          {
            "type": "CHECKBOX",
            "name": "useListener",
            "checkboxText": "Use Event Listener (instead of a Timer)",
            "simpleValueType": true,
            "defaultValue": false,
            "help": "Use an event listener to check the consent (true). If it is false, a timer will be used (default) to check the consent. You should add the following command to your Consent Event Listener: aGTM.f.call_cc(); The function returns true, if the consent info has loaded successful, otherwise false. Make sure, that the aGTM lib is loaded before the event listener runs!* If you don\u0027t know what that means, leave this option to false (default). For more information, read the \u003ca href\u003d\"https://github.com/Andiministrator/aGTM#use-event-listeners-instead-of-the-default-timer\"\u003eDocumentation for \"Use Event Listeners instead of the default timer\"\u003c/a\u003e."
          },
          {
            "type": "TEXT",
            "name": "consent_events",
            "displayName": "Name(s) of Consent Event(s) in the dataLayer to update the Consent Data.",
            "simpleValueType": true,
            "canBeEmptyString": true,
            "defaultValue": "",
            "help": "Consent events (comma-separated) for updating the consent.\u003cbr /\u003e For more Information, read the \u003ca href\u003d\"https://github.com/Andiministrator/aGTM#updating-consent-information\"\u003eDocumentation Chapter Updating Consent Information\u003c/a\u003e.",
            "valueHint": "cmpEvent,cmpUpdate"
          }
        ]
      },
      {
        "type": "LABEL",
        "name": "cmp_help",
        "displayName": "Read the \u003ca href\u003d\"https://github.com/Andiministrator/aGTM?tab\u003dreadme-ov-file#consent-handling\"\u003eDocumentation Chapter\u003c/a\u003e for more information."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "aGTMother",
    "displayName": "Other aGTM Settings",
    "groupStyle": "ZIPPY_OPEN_ON_PARAM",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "aPageview",
        "checkboxText": "Fire GTM dataLayer Event \"aPageview\"",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "If this is ticked. aGTM will automatically fire a dataLayer Event for aPageview."
      },
      {
        "type": "CHECKBOX",
        "name": "vPageview",
        "checkboxText": "Fire GTM dataLayer Event \"vPageview\" (deprecated)",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "If this is ticked. aGTM will automatically fire a dataLayer Event for vPageview."
      },
      {
        "type": "CHECKBOX",
        "name": "vPageviews",
        "checkboxText": "Send Virtual Pageviews",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "Send virtual pageviews (as vPageview) if the URL changes (HistoryChange), but the page doesn\u0027t reload."
      },
      {
        "type": "CHECKBOX",
        "name": "dlStateEvents",
        "checkboxText": "Fire GTM dataLayer Events \"DOMloaded\" and \"PAGEready\"",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "If this is ticked. aGTM will automatically fire dataLayer Events for DOMloaded and PAGEready."
      },
      {
        "type": "TEXT",
        "name": "gdl",
        "displayName": "Name of GTM Datalayer",
        "simpleValueType": true,
        "help": "If you need a diffrenet name (as \"dataLayer\") for the GTM Datalayer, you can specify the Datalayer Name here.",
        "valueHint": "dataLayer"
      },
      {
        "type": "SELECT",
        "name": "dlOrgPush",
        "displayName": "Action for dataLayer.push Hook",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "-",
            "displayValue": "Do Nothing"
          },
          {
            "value": "log",
            "displayValue": "Just send an Exception Event"
          },
          {
            "value": "use",
            "displayValue": "Use the original function"
          },
          {
            "value": "restore",
            "displayValue": "Restore the overwritten function with the original function"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "-",
        "help": "\u003cp\u003eThe dataLayer.push function is the connection from the dataLayer Array to the Google Tag Manager. If this function is changed, the connection can be lost. With this feature you can decide, what to do in this case.\u003c/p\u003e"
      },
      {
        "type": "TEXT",
        "name": "nonce",
        "displayName": "Nonce Value (for Consent Security Policy)",
        "simpleValueType": true,
        "help": "Nonce value for the file injections if CSP (Consent Security Policy) is used.\u003cbr /\u003e If it is set, the nonce will be added to all script-injections.",
        "defaultValue": ""
      },
      {
        "type": "CHECKBOX",
        "name": "debug",
        "checkboxText": "aGTM Debug Mode",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "If this is ticked, the optout cookie will be ignored"
      },
      {
        "type": "LABEL",
        "name": "aGTM Version",
        "displayName": "aGTM v1.4.1"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

// ssGTM Doku: https://developers.google.com/tag-platform/tag-manager/server-side/api?hl=de
// aGTM Doku: https://github.com/Andiministrator/aGTM
const aGTMversion = "1.4.1";

// Load Libraries
//const log = require('logToConsole');
const claimRequest = require('claimRequest');
const setResponseStatus = require('setResponseStatus');
const setResponseHeader = require('setResponseHeader');
const setResponseBody = require('setResponseBody');
const returnResponse = require('returnResponse');
const getRequestPath = require('getRequestPath');
const getRequestQueryParameters = require('getRequestQueryParameters');
const fromBase64 = require('fromBase64');
const JSON = require('JSON');

// Check for /aGTM.js Path
const rpath = getRequestPath();
if (rpath.length < 8 || rpath.slice(rpath.length - 8) !== '/aGTM.js') return;
//if (getRequestPath() !== '/aGTM.js') return;
// Get URL Request Parameters and id
const queryParameters = getRequestQueryParameters();
const id = queryParameters.id || null;
// Return if id is set but not allowed
if (id) {
  let id_allowed = false;
  for (const val of data.ids) {
    if (val.id===id) {
      id_allowed = true;
      break;
    }
  }
  if (!id_allowed) return;
}
// Claim Request
claimRequest();

// Build CMP Code
const cmp = data.cmp ? data.cmp : "";

// Build aGTM Config
const gtm = data.gtm;
const c = {};
// Build gtm object
if (data.gtm) {
  const gtm = {};
  for (const val of data.gtm) {
    if (val.gtm_id) {
      gtm[val.gtm_id] = {};
      if (!val.gtm_consent) gtm[val.gtm_id].noConsent = true;
      if (val.gtm_env) gtm[val.gtm_id].env = val.gtm_env;
      if (val.gtm_url) gtm[val.gtm_id].gtmURL = val.gtm_url;
    }
  }
  c.gtm = gtm;
}
// Add Consent Conditions
if (data.consent) {
  for (const val of data.consent) {
    c[val.consent_type] = val.consent_value;
  }
}
// Add other Consent Options
if (data.sendConsentEvent) c.sendConsentEvent = true;
if (data.useListener) c.useListener = true;
if (data.consent_events) c.consent_events = data.consent_events;
// Other Options
if (data.aPageview) c.aPageview = true;
if (data.vPageview) c.vPageview = true; // deprecated
if (data.vPageviews) c.vPageviews = true;
if (data.dlStateEvents) c.dlStateEvents = true;
if (data.gdl) c.gdl = data.gdl;
if (data.dlOrgPush) c.dlOrgPush = data.dlOrgPush; if (typeof c.dlOrgPush!='string' || c.dlOrgPush=='-') c.dlOrgPush = '';
if (data.nonce) c.nonce = data.nonce;
if (data.debug) c.debug = true;
// Build config string
const config = "aGTM.f.config(" + JSON.stringify(c) + ");";

// aGTM Code
const agtm = fromBase64('d2luZG93LmFHVE09d2luZG93LmFHVE18fHt9LHdpbmRvdy5hR1RNLmM9d2luZG93LmFHVE0uY3x8e30sd2luZG93LmFHVE0uZD13aW5kb3cuYUdUTS5kfHx7fSx3aW5kb3cuYUdUTS5mPXdpbmRvdy5hR1RNLmZ8fHt9LHdpbmRvdy5hR1RNLmw9d2luZG93LmFHVE0ubHx8W10sd2luZG93LmFHVE0ubj13aW5kb3cuYUdUTS5ufHx7fSxhR1RNLmYucHJvcHNldD1mdW5jdGlvbihlLHQsYSl7dHJ5e2VbdF09ZVt0XXx8YX1jYXRjaChlKXt9fSxhR1RNLmYub2JqaW5pdD1mdW5jdGlvbigpe1tbYUdUTS5kLCJ2ZXJzaW9uIiwiMS40LjEiXSxbYUdUTS5kLCJmIixbXV0sW2FHVE0uZCwiY29uZmlnIiwhMV0sW2FHVE0uZCwiaW5pdCIsITFdLFthR1RNLmQsImRvbV9yZWFkeSIsITFdLFthR1RNLmQsInBhZ2VfcmVhZHkiLCExXSxbYUdUTS5kLCJpc19pZnJhbWUiLHdpbmRvdy5zZWxmIT09d2luZG93LnRvcF0sW2FHVE0uZCwiZXZfZmN0X2N0ciIsMF0sW2FHVE0uZCwidGltZXIiLHt9XSxbYUdUTS5kLCJlcnJvcl9jb3VudGVyIiwwXSxbYUdUTS5kLCJlcnJvcnMiLFtdXSxbYUdUTS5kLCJkbCIsW11dLFthR1RNLmQsImlmcmFtZSIse2NvdW50ZXI6e2V2ZW50czowfSxvcmlnaW46IiIsaWZMaXN0ZW46ITEsdG9wTGlzdGVuOiExLGhhbmRzaGFrZTohMSx0aW1lcjpudWxsfV0sW2FHVE0uZCwibGFzdF91cmwiLGxvY2F0aW9uLmhyZWZdLFthR1RNLmYsInRsIix7fV0sW2FHVE0uZiwiZGwiLHt9XSxbYUdUTS5mLCJwbCIse31dLFthR1RNLCJsIixbXV0sW2FHVE0ubiwiY2siLCJjb29raWUiXSxbYUdUTS5uLCJ0bSIsImdvb2dsZXRhZ21hbmFnZXIiXSxbYUdUTS5uLCJ0YSIsInRhZ2Fzc2lzdGFudC5nb29nbGUiXV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7YUdUTS5mLnByb3BzZXQoZVswXSxlWzFdLGVbMl0pfSkpfSxhR1RNLmYub2JqaW5pdCgpLGFHVE0uZi5sb2c9ZnVuY3Rpb24oZSx0KXt2YXIgYT0ib2JqZWN0Ij09dHlwZW9mIHQmJnQ/SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSk6dDthR1RNLmwucHVzaCh7aWQ6ZSx0aW1lc3RhbXA6KG5ldyBEYXRlKS5nZXRUaW1lKCksb2JqOmF9KX0sYUdUTS5mLnN0cmNsZWFuPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lfHwib2JqZWN0Ij09dHlwZW9mIGUmJiFlPyIiOigic3RyaW5nIiE9dHlwZW9mIGUmJihlPWUudG9TdHJpbmcoKSksZS5yZXBsYWNlKC9bXmEtesOkw7bDvMOfQS1aw4TDlsOcMC05Xy1dL2csIiIpKX0sYUdUTS5mLnNTdHJmPWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8IWUpe3ZhciB0PUpTT04uc3RyaW5naWZ5KHtldmVudDoiZXhjZXB0aW9uIixlcnJtc2c6IkRhdGFMYXllciBFbnRyeSBpcyBubyBvYmplY3QiLGVycnR5cGU6IkRMIEVycm9yIixvYmpfdHlwZTp0eXBlb2YgZSxvYmpfdmFsdWU6ZX0pO3JldHVybiBhR1RNLmYubG9nKCJlMTYiLEpTT04ucGFyc2UodCkpLEpTT04uc3RyaW5naWZ5KG51bGwpfXZhciBhPVtdO3JldHVybiBKU09OLnN0cmluZ2lmeShlLChmdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiPT10eXBlb2YgdCYmbnVsbCE9PXQpe2lmKC0xIT09YS5pbmRleE9mKHQpKXJldHVybiJbQ2lyY3VsYXJdIjthLnB1c2godCl9cmV0dXJuIHR9KSl9LGFHVE0uZi5hbj1mdW5jdGlvbihlLHQsYSxuKXtlW3RdPWEuaGFzT3duUHJvcGVydHkodCk/YVt0XTpufSxhR1RNLmYuY29uZmlnPWZ1bmN0aW9uKGUpe2lmKGFHVE0uZC5jb25maWcpImZ1bmN0aW9uIj09dHlwZW9mIGFHVE0uZi5sb2cmJmFHVE0uZi5sb2coImUxIixhR1RNLmMpO2Vsc2V7aWYoYUdUTS5mLmFuKGFHVE0uYywiZGVidWciLGUsITEpLGFHVE0uZi5hbihhR1RNLmMsInBhdGgiLGUsIiIpLGFHVE0uZi5hbihhR1RNLmMsImZpbGUiLGUsImFHVE0uanMiKSxhR1RNLmYuYW4oYUdUTS5jLCJjbXAiLGUsIiIpLGFHVE0uYy5taW49ImJvb2xlYW4iIT10eXBlb2YgZS5taW58fGUubWluLGFHVE0uZi5hbihhR1RNLmMsIm5vbmNlIixlLCIiKSxhR1RNLmYuYW4oYUdUTS5jLCJpZnJhbWVTdXBwb3J0IixlLCExKSxhR1RNLmYuYW4oYUdUTS5jLCJ2UGFnZXZpZXdzIixlLCExKSxhR1RNLmYuYW4oYUdUTS5jLCJ2UGFnZXZpZXdzVGltZXIiLGUsMCksYUdUTS5mLmFuKGFHVE0uYywidlBhZ2V2aWV3c0ZhbGxiYWNrIixlLCExKSxhR1RNLmYuYW4oYUdUTS5jLCJndG1JRCIsZSwiIiksZS5ndG0pZm9yKHZhciB0IGluIGUuZ3RtKWUuZ3RtLmhhc093blByb3BlcnR5KHQpJiYoYUdUTS5jLmd0bUlEPWFHVE0uYy5ndG1JRHx8dCxhR1RNLmMuZ3RtPWFHVE0uYy5ndG18fHt9LGFHVE0uYy5ndG1bdF09ZS5ndG1bdF18fHt9LGFHVE0uZi5hbihhR1RNLmMuZ3RtW3RdLCJub0NvbnNlbnQiLGUuZ3RtW3RdLCExKSxhR1RNLmYuYW4oYUdUTS5jLmd0bVt0XSwiZW52IixlLmd0bVt0XSwiIiksYUdUTS5mLmFuKGFHVE0uYy5ndG1bdF0sImlkUGFyYW0iLGUuZ3RtW3RdLCIiKSxhR1RNLmYuYW4oYUdUTS5jLmd0bVt0XSwiZ3RtVVJMIixlLmd0bVt0XSwiIiksYUdUTS5mLmFuKGFHVE0uYy5ndG1bdF0sImd0bUpTIixlLmd0bVt0XSwiIikpO2FHVE0uZi5hbihhR1RNLmMsImdkbCIsZSwiZGF0YUxheWVyIiksYUdUTS5mLmFuKGFHVE0uYywiZ3RtUHVycG9zZXMiLGUsIiIpLGFHVE0uZi5hbihhR1RNLmMsImd0bVNlcnZpY2VzIixlLCIiKSxhR1RNLmYuYW4oYUdUTS5jLCJndG1WZW5kb3JzIixlLCIiKSxhR1RNLmYuYW4oYUdUTS5jLCJndG1BdHRyIixlLG51bGwpLGFHVE0uZi5hbihhR1RNLmMsImRsU2V0IixlLHt9KSxhR1RNLmYuYW4oYUdUTS5jLCJ1c2VMaXN0ZW5lciIsZSwhMSksYUdUTS5mLmFuKGFHVE0uYywiZGxPcmdQdXNoIixlLCIiKSxhR1RNLmMuZGxTdGF0ZUV2ZW50cz0iYm9vbGVhbiI9PXR5cGVvZiBlLmRsU3RhdGVFdmVudHMmJmUuZGxTdGF0ZUV2ZW50cyxhR1RNLmMuYVBhZ2V2aWV3PSJib29sZWFuIj09dHlwZW9mIGUuYVBhZ2V2aWV3JiZlLmFQYWdldmlldyxhR1RNLmMudlBhZ2V2aWV3PSJib29sZWFuIj09dHlwZW9mIGUudlBhZ2V2aWV3JiZlLnZQYWdldmlldyxhR1RNLmMuc2VuZENvbnNlbnRFdmVudD0iYm9vbGVhbiI9PXR5cGVvZiBlLnNlbmRDb25zZW50RXZlbnQmJmUuc2VuZENvbnNlbnRFdmVudCxlLmNvbnNlbnQ9ZS5jb25zZW50fHx7fSxhR1RNLmMuY29uc2VudD1hR1RNLmMuY29uc2VudHx8ZS5jb25zZW50LGFHVE0uZi5hbihhR1RNLmMuY29uc2VudCwiaGFzUmVzcG9uc2UiLGUuY29uc2VudCwhMSksYUdUTS5mLmFuKGFHVE0uYy5jb25zZW50LCJmZWVkYmFjayIsZS5jb25zZW50LCIiKSxhR1RNLmYuYW4oYUdUTS5jLmNvbnNlbnQsInB1cnBvc2VzIixlLmNvbnNlbnQsIiIpLGFHVE0uZi5hbihhR1RNLmMuY29uc2VudCwic2VydmljZXMiLGUuY29uc2VudCwiIiksYUdUTS5mLmFuKGFHVE0uYy5jb25zZW50LCJ2ZW5kb3JzIixlLmNvbnNlbnQsIiIpLGFHVE0uZi5hbihhR1RNLmMuY29uc2VudCwiY29uc2VudF9pZCIsZS5jb25zZW50LCIiKSx3aW5kb3dbYUdUTS5jLmdkbF09d2luZG93W2FHVE0uYy5nZGxdfHxbXSxhR1RNLmQuY29uc2VudD1hR1RNLmQuY29uc2VudHx8SlNPTi5wYXJzZShhR1RNLmYuc1N0cmYoYUdUTS5jLmNvbnNlbnQpKSxhR1RNLmQuY29uc2VudC5ndG1Db25zZW50PSExLGFHVE0uZC5jb25maWc9ITAsYUdUTS5kLmd0bUxvYWRlZD1bXSwiZnVuY3Rpb24iPT10eXBlb2YgYUdUTS5mLmxvZyYmYUdUTS5mLmxvZygibTEiLGFHVE0uYyl9fSxhR1RNLmYubG9hZF9jYz1mdW5jdGlvbihlLHQpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLG49YUdUTS5jLnBhdGh8fCIiO24ubGVuZ3RoPjAmJiIvIiE9PW4uY2hhckF0KG4ubGVuZ3RoLTEpJiYobis9Ii8iKTt2YXIgbz0iY21wL2NjXyIrYUdUTS5mLnN0cmNsZWFuKGUpKyhhR1RNLmMubWluPyIubWluIjoiIikrIi5qcyI7YS5zcmM9bitvLGFHVE0uYy5ub25jZSYmKGEubm9uY2U9YUdUTS5jLm5vbmNlKSxhLm9ucmVhZHlzdGF0ZWNoYW5nZT1hLm9ubG9hZD1mdW5jdGlvbigpe2EucmVhZHlTdGF0ZSYmIS9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYS5yZWFkeVN0YXRlKXx8ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQoKX0sYS5hc3luYz0hMCxkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGEpfSxhR1RNLmYuY2hlbHA9ZnVuY3Rpb24oZSx0KXt2YXIgYT0hMDtyZXR1cm4gZSYmdCYmZS5zcGxpdCgiLCIpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuaW5kZXhPZigiLCIrZS50cmltKCkrIiwiKTwwJiYoYT0hMSl9KSksYX0sYUdUTS5mLmV2YWxDb25zPWZ1bmN0aW9uKGUsdCl7dmFyIGlzQ29uc2VudEdpdmVuPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuZXZlcnkoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmluZGV4T2YoIiwiK2UrIiwiKT49MH0pKX0sYT0hZS5wdXJwb3Nlcy5sZW5ndGh8fGlzQ29uc2VudEdpdmVuKGUucHVycG9zZXMsdC5wdXJwb3Nlcyksbj0hZS5zZXJ2aWNlcy5sZW5ndGh8fGlzQ29uc2VudEdpdmVuKGUuc2VydmljZXMsdC5zZXJ2aWNlcyksbz0hZS52ZW5kb3JzLmxlbmd0aHx8aXNDb25zZW50R2l2ZW4oZS52ZW5kb3JzLHQudmVuZG9ycyk7cmV0dXJuIGEmJm4mJm99LGFHVE0uZi5ydW5fY2M9ZnVuY3Rpb24oZSl7cmV0dXJuIGFHVE0uZC5jb25maWc/InN0cmluZyIhPXR5cGVvZiBlfHwiaW5pdCIhPT1lJiYidXBkYXRlIiE9PWU/KGFHVE0uZi5sb2coImU1Iix7YWN0aW9uOmV9KSwhMSk6ImZ1bmN0aW9uIiE9dHlwZW9mIGFHVE0uZi5jb25zZW50X2NoZWNrPyhhR1RNLmYubG9nKCJlMTQiLHthY3Rpb246ZX0pLCExKTphR1RNLmYuY29uc2VudF9jaGVjayhlKT8od2luZG93W2FHVE0uYy5nZGxdPXdpbmRvd1thR1RNLmMuZ2RsXXx8W10sYUdUTS5mLmNoZWxwKGFHVE0uYy5ndG1QdXJwb3NlcyxhR1RNLmQuY29uc2VudC5wdXJwb3NlcykmJmFHVE0uZi5jaGVscChhR1RNLmMuZ3RtU2VydmljZXMsYUdUTS5kLmNvbnNlbnQuc2VydmljZXMpJiZhR1RNLmYuY2hlbHAoYUdUTS5jLmd0bVZlbmRvcnMsYUdUTS5kLmNvbnNlbnQudmVuZG9ycyk/YUdUTS5kLmNvbnNlbnQuZ3RtQ29uc2VudD0hMDphR1RNLmQuY29uc2VudC5ndG1Db25zZW50PSJib29sZWFuIj09dHlwZW9mIGFHVE0uZC5jb25zZW50LmJsb2NrZWQmJmFHVE0uZC5jb25zZW50LmJsb2NrZWQsInVwZGF0ZSI9PWUmJihhR1RNLmQuaW5pdHx8YUdUTS5mLmluamVjdCgpLGFHVE0uZi5zZW5kbmF1cyh7ZXZlbnQ6ImFHVE1fY29uc2VudF91cGRhdGUiLGFHVE10czoobmV3IERhdGUpLmdldFRpbWUoKSxhR1RNY29uc2VudDphR1RNLmQuY29uc2VudD9KU09OLnBhcnNlKGFHVE0uZi5zU3RyZihhR1RNLmQuY29uc2VudCkpOnt9fSkpLCJmdW5jdGlvbiI9PXR5cGVvZiBhR1RNLmYuY29uc2VudF9jYWxsYmFjayYmYUdUTS5mLmNvbnNlbnRfY2FsbGJhY2soZSksYUdUTS5mLmxvZygibTMiLGFHVE0uZC5jb25zZW50KSwhMCk6KGFHVE0uZi5sb2coIm04IixudWxsKSwhMSk6KGFHVE0uZi5sb2coImU0IixudWxsKSwhMSl9LGFHVE0uZi5jYWxsX2NjPWZ1bmN0aW9uKCl7cmV0dXJuISgiZnVuY3Rpb24iIT10eXBlb2YgYUdUTS5mLnJ1bl9jY3x8IWFHVE0uZi5ydW5fY2MoImluaXQiKSkmJih2b2lkIDAhPT1hR1RNLmQudGltZXIuY29uc2VudCYmKGNsZWFySW50ZXJ2YWwoYUdUTS5kLnRpbWVyLmNvbnNlbnQpLGRlbGV0ZSBhR1RNLmQudGltZXIuY29uc2VudCksISFhR1RNLmQuaW5pdHx8YUdUTS5mLmluamVjdCgpKX0sImZ1bmN0aW9uIiE9dHlwZW9mIGFHVE0uZi5jb25zZW50X2xpc3RlbmVyJiYoYUdUTS5mLmNvbnNlbnRfbGlzdGVuZXI9ZnVuY3Rpb24oKXthR1RNLmMudXNlTGlzdGVuZXJ8fChhR1RNLmQudGltZXIuY29uc2VudD1zZXRJbnRlcnZhbChhR1RNLmYuY2FsbF9jYywxZTMpKX0pLGFHVE0uZi5nYz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgUmVnRXhwKGUrIj0oW147XSspIiksYT1udWxsO3RyeXt2YXIgbj1kb2N1bWVudCxvPXQuZXhlYyhuW2FHVE0ubi5ja10pO28mJm8ubGVuZ3RoPjEmJihhPWRlY29kZVVSSUNvbXBvbmVudChvWzFdKSl9Y2F0Y2goZSl7fXJldHVybiBhfSxhR1RNLmYuc2M9ZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIj09dHlwZW9mIGUmJmUmJnQpdHJ5e2RvY3VtZW50W2FHVE0ubi5ja109ZSsiPSIrdCsiOyBTZWN1cmU7IFNhbWVTaXRlPUxheDsgcGF0aD0vIn1jYXRjaChlKXt9fSxhR1RNLmYudXJsUGFyYW09ZnVuY3Rpb24oZSx0KXt2YXIgYT1uZXcgUmVnRXhwKCJbPyZdIitlKyIoPShbXiYjXSopfCZ8I3wkKSIpLmV4ZWModCk7cmV0dXJuIGEmJmFbMl0/ZGVjb2RlVVJJQ29tcG9uZW50KGFbMl0ucmVwbGFjZSgvXCsvZywiICIpKTpudWxsfSxhR1RNLmYub3B0b3V0PWZ1bmN0aW9uKCl7dmFyIGU9ITEsdD1hR1RNLmYudXJsUGFyYW0oImFHVE1vcHRvdXQiLHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtpZih0JiYiMCIhPT10KWFHVE0uZi5zYygiYUdUTW9wdG91dCIsIjEiKSxlPSEwO2Vsc2UgaWYoIjAiPT09dClhR1RNLmYuc2MoImFHVE1vcHRvdXQiLCIwIik7ZWxzZXt2YXIgYT1hR1RNLmYuZ2MoImFHVE1vcHRvdXQiKTthJiYiMCIhPT1hJiYoZT0hMCl9aWYoZSl7Zm9yKHZhciBuIGluIGFHVE0pYUdUTS5oYXNPd25Qcm9wZXJ0eShuKSYmImYiIT09biYmZGVsZXRlIGFHVE1bbl07cmV0dXJuIGFHVE0uZi5vYmppbml0KCksImZ1bmN0aW9uIj09dHlwZW9mIGFHVE0uZi5vcHRvdXRfY2FsbGJhY2smJmFHVE0uZi5vcHRvdXRfY2FsbGJhY2soKSwhMH1yZXR1cm4hMX0sYUdUTS5mLmFHVE1fZXZlbnQ9ZnVuY3Rpb24oZSl7Im9iamVjdCIhPXR5cGVvZiBhR1RNLmQuY29uc2VudCYmKGFHVE0uZC5jb25zZW50PW51bGwpLGV8fChlPSJhR1RNX2V2ZW50Iik7dmFyIHQ9e2V2ZW50OmUsYUdUTXRzOihuZXcgRGF0ZSkuZ2V0VGltZSgpLGFHVE1jb25zZW50OmFHVE0uZC5jb25zZW50P0pTT04ucGFyc2UoYUdUTS5mLnNTdHJmKGFHVE0uZC5jb25zZW50KSk6e319O3JldHVybiJhR1RNX3JlYWR5Ij09ZSYmKHQuYUdUTT17dmVyc2lvbjphR1RNLmQudmVyc2lvbixpc19pZnJhbWU6YUdUTS5kLmlzX2lmcmFtZSxoYXN0eUV2ZW50czphR1RNLmQuZixlcnJvcnM6YUdUTS5kLmVycm9yc30pLHR9LGFHVE0uZi5wcm94eVN1cHBvcnQ9ZnVuY3Rpb24oKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgUHJveHkpcmV0dXJuITE7dHJ5e3JldHVybiBuZXcgUHJveHkoKGZ1bmN0aW9uKCl7fSkse2FwcGx5OmZ1bmN0aW9uKCl7cmV0dXJuITB9fSkoKX1jYXRjaChlKXtyZXR1cm4hMX19LGFHVE0uZi51cmxMaXN0ZW5lcj1mdW5jdGlvbihlLHQsYSl7Y29uc29sZS5sb2coIlVSTCBMaXN0ZW5lciBzdGFydGVkIix7ZXZlbnRuYW1lOmUsaW50ZXJ2YWw6dCxmYWxsYmFjazphfSksIm51bWJlciIhPXR5cGVvZiB0JiYodD01MDApLCJib29sZWFuIiE9dHlwZW9mIGEmJihhPSExKSxhR1RNLmQubGFzdF91cmw9YUdUTS5kLmxhc3RfdXJsfHxhR1RNLmYuZ2V0VmFsKCJsIiwiaHJlZiIpLCJzdHJpbmciPT10eXBlb2YgYUdUTS5kLmxhc3RfdXJsJiZhR1RNLmQubGFzdF91cmx8fChhR1RNLmQubGFzdF91cmw9IiIpO3ZhciBjaGVja1VybENoYW5nZT1mdW5jdGlvbigpe3ZhciB0PWFHVE0uZi5nZXRWYWwoImwiLCJocmVmIil8fCIiO2lmKHQhPWFHVE0uZC5sYXN0X3VybCl7InN0cmluZyIhPXR5cGVvZiBlJiYoZT0idlBhZ2V2aWV3Iik7dmFyIGE9e2V2ZW50OmV9O2Eub2xkVVJMPWFHVE0uZC5sYXN0X3VybCxhLm5ld1VSTD10LGEubmV3VGl0bGU9ZG9jdW1lbnQudGl0bGUsYUdUTS5mLmZpcmUoYSksYUdUTS5kLmxhc3RfdXJsPXR9fTthR1RNLmYuZXZMc3RuKCJ3aW5kb3ciLCJwb3BzdGF0ZSIsY2hlY2tVcmxDaGFuZ2UpLGFHVE0uZi5ldkxzdG4oIndpbmRvdyIsImhhc2hjaGFuZ2UiLGNoZWNrVXJsQ2hhbmdlKTt2YXIgbj0hMTtpZihhR1RNLmYucHJveHlTdXBwb3J0KXt2YXIgbz17YXBwbHk6ZnVuY3Rpb24oZSx0LGEpe3ZhciBuPWUuYXBwbHkodCxhKTtyZXR1cm4gY2hlY2tVcmxDaGFuZ2UoKSxufX07aGlzdG9yeS5wdXNoU3RhdGU9bmV3IFByb3h5KGhpc3RvcnkucHVzaFN0YXRlLG8pLGhpc3RvcnkucmVwbGFjZVN0YXRlPW5ldyBQcm94eShoaXN0b3J5LnJlcGxhY2VTdGF0ZSxvKSxuPSEwfSh0PjAmJiFuJiZhfHx0PjAmJiFhKSYmYUdUTS5mLnRpbWVyKCJ1cmxMaXN0ZW5lciIsY2hlY2tVcmxDaGFuZ2UsbnVsbCx0LDApfSxhR1RNLmYuZ3RtX2xvYWQ9ZnVuY3Rpb24oZSx0LGEsbixvLHIpe2lmKGFHVE0uZC5jb25maWcpe2lmKCJvYmplY3QiIT10eXBlb2YgYUdUTS5kLmd0bUxvYWRlZCYmKGFHVE0uZC5ndG1Mb2FkZWQ9W10pLGFHVE0uZC5ndG1Mb2FkZWQubGVuZ3RoPDEmJihhR1RNLmYuc2VuZG5hdXMoYUdUTS5mLmFHVE1fZXZlbnQoImFHVE1fcmVhZHkiKSksYSYmYUdUTS5mLnNlbmRuYXVzKHtldmVudDoiZ3RtLmpzIiwiZ3RtLnN0YXJ0IjoobmV3IERhdGUpLmdldFRpbWUoKX0pLGFHVE0uYy5hUGFnZXZpZXcmJmFHVE0uZi5zZW5kbmF1cyh7ZXZlbnQ6ImFQYWdldmlldyIsYUdUTXRzOihuZXcgRGF0ZSkuZ2V0VGltZSgpfSksYUdUTS5jLnZQYWdldmlldyYmYUdUTS5mLnNlbmRuYXVzKHtldmVudDoidlBhZ2V2aWV3IixhR1RNdHM6KG5ldyBEYXRlKS5nZXRUaW1lKCl9KSxhR1RNLmMudlBhZ2V2aWV3cyYmYUdUTS5mLnVybExpc3RlbmVyKCJ2UGFnZXZpZXciLGFHVE0uYy52UGFnZXZpZXdzVGltZXIsYUdUTS5jLnZQYWdldmlld3NGYWxsYmFjaykpLGFHVE0uZC5jb25zZW50RXZlbnRfZmlyZWQ9ImJvb2xlYW4iPT10eXBlb2YgYUdUTS5kLmNvbnNlbnRFdmVudF9maXJlZCYmYUdUTS5kLmNvbnNlbnRFdmVudF9maXJlZCxhR1RNLmMuc2VuZENvbnNlbnRFdmVudCYmIWFHVE0uZC5jb25zZW50RXZlbnRfZmlyZWQmJiJvYmplY3QiPT10eXBlb2YgYUdUTS5kLmNvbnNlbnQmJmFHVE0uZC5jb25zZW50Lmhhc1Jlc3BvbnNlJiYoYUdUTS5mLnNlbmRuYXVzKGFHVE0uZi5hR1RNX2V2ZW50KCJhR1RNX2NvbnNlbnQiKSksYUdUTS5kLmNvbnNlbnRFdmVudF9maXJlZD0hMCksYSl7bnx8KG49ImlkIik7dmFyIGk9ITEsYz1hR1RNLmYuZ2MoImFHVE1kZWJ1ZyIpO2lmKGMmJnBhcnNlSW50KGMpPjAmJihpPSEwKSwhaSl7dmFyIGY9bmV3IFVSTChkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTthR1RNLmYudXJsUGFyYW0oImd0bV9kZWJ1ZyIsZikmJihpPSEwKX1pZighaSYmZG9jdW1lbnQucmVmZXJyZXIpKGY9bmV3IFVSTChkb2N1bWVudC5yZWZlcnJlcikpLmhvc3RuYW1lPT1hR1RNLm4udGErIi5jb20iJiYoaT0hMCk7IWMmJmkmJmFHVE0uZi5zYygiYUdUTWRlYnVnIiwiMSIpO3ZhciBzPXQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7aWYocy5pZD0iYUdUTV90bV8iK2Escy5hc3luYz0hMCwib2JqZWN0Ij09dHlwZW9mIGFHVE0uYy5ndG1BdHRyKWZvcih2YXIgVCBpbiBhR1RNLmMuZ3RtQXR0cilzLnNldEF0dHJpYnV0ZShULGFHVE0uYy5ndG1BdHRyW1RdKTtpZihhR1RNLmMubm9uY2UmJihzLm5vbmNlPWFHVE0uYy5ub25jZSksci5ndG1KUyYmIWkpcy5pbm5lckhUTUw9YXRvYihyLmd0bUpTKTtlbHNle3ZhciBNPXIuZ3RtVVJMfHwiaHR0cHM6Ly93d3cuIithR1RNLm4udG0rIi5jb20vZ3RtLmpzIixHPXIuZW52fHwiIixkPS0xPT09TS5pbmRleE9mKCI/Iik/Ij8iOiImIjtzLnNyYz1NK2QrbisiPSIrYSsiJmw9IitvK0d9dmFyIGw9dC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IilbMF07bC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzLGwpLGFHVE0uZC5ndG1Mb2FkZWQucHVzaChhfHwibm9fZ3RtX2lkIil9fWVsc2UgYUdUTS5mLmxvZygiZTciLG51bGwpfSxhR1RNLmYuZG9tcmVhZHk9ZnVuY3Rpb24oZSl7dmFyIHQ9ITE7YUdUTS5mLnZPYihlKXx8KGU9e2FNU0c6IkVtcHR5IERPTXJlYWR5IGV2ZW50IGZpcmVkLiJ9LHQ9ITApLGUuZXZlbnR8fChlLmV2ZW50PSJhRE9NcmVhZHkiKSxhR1RNLmQuZG9tX3JlYWR5JiZ0fHwoIWFHVE0uYy5kbFN0YXRlRXZlbnRzJiZ0fHxhR1RNLmYuZmlyZShlKSx0JiYoYUdUTS5kLmRvbV9yZWFkeT0hMCkpfSxhR1RNLmYucGFnZXJlYWR5PWZ1bmN0aW9uKGUpe3ZhciB0PSExO2FHVE0uZi52T2IoZSl8fChlPXthTVNHOiJFbXB0eSBQQUdFcmVhZHkgZXZlbnQgZmlyZWQuIn0sdD0hMCksZS5ldmVudHx8KGUuZXZlbnQ9ImFQQUdFcmVhZHkiKSxhR1RNLmQucGFnZV9yZWFkeSYmdHx8KCFhR1RNLmMuZGxTdGF0ZUV2ZW50cyYmdHx8YUdUTS5mLmZpcmUoZSksdCYmKGFHVE0uZC5wYWdlX3JlYWR5PSEwKSl9LGFHVE0uZi5pbml0R1RNPWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgYUdUTS5jLmd0bSYmYUdUTS5jLmd0bSl7dmFyIHQ9MDtmb3IodmFyIGEgaW4gYUdUTS5jLmd0bSl0KyssYUdUTS5jLmd0bS5oYXNPd25Qcm9wZXJ0eShhKSYmKCJib29sZWFuIiE9dHlwZW9mIGFHVE0uYy5ndG1bYV0uaGFzTG9hZGVkJiYoYUdUTS5jLmd0bVthXS5oYXNMb2FkZWQ9ITEpLGFHVE0uYy5ndG1bYV0uaGFzTG9hZGVkfHxlJiYhYUdUTS5jLmd0bVthXS5ub0NvbnNlbnR8fChhR1RNLmYuZ3RtX2xvYWQod2luZG93LGRvY3VtZW50LGEsYUdUTS5jLmd0bVthXS5pZFBhcmFtP2FHVE0uYy5ndG1bYV0uaWRQYXJhbToiIixhR1RNLmMuZ2RsLGFHVE0uYy5ndG1bYV0pLGFHVE0uYy5ndG1bYV0uaGFzTG9hZGVkPSEwKSk7dHx8YUdUTS5mLmd0bV9sb2FkKHdpbmRvdyxkb2N1bWVudCwiIixhR1RNLmMuZ3RtW2FdLmlkUGFyYW0/YUdUTS5jLmd0bVthXS5pZFBhcmFtOiIiLGFHVE0uYy5nZGwsbnVsbCl9fSxhR1RNLmYuY2hrRFByZWFkeT1mdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LnJlYWR5U3RhdGU7ImludGVyYWN0aXZlIj09PWV8fCJjb21wbGV0ZSI9PT1lP2FHVE0uZi5kb21yZWFkeShudWxsKTphR1RNLmYuZXZMc3RuKGRvY3VtZW50LCJET01Db250ZW50TG9hZGVkIixhR1RNLmYuZG9tcmVhZHkpLCJjb21wbGV0ZSI9PT1lP2FHVE0uZi5wYWdlcmVhZHkobnVsbCk6YUdUTS5mLmV2THN0bih3aW5kb3csImxvYWQiLGFHVE0uZi5wYWdlcmVhZHkpfSxhR1RNLmYuaW5qZWN0PWZ1bmN0aW9uKCl7aWYoIWFHVE0uZC5jb25maWcpcmV0dXJuIGFHVE0uZi5sb2coImU4IixudWxsKSwhMTtpZigib2JqZWN0IiE9dHlwZW9mIGFHVE0uZC5jb25zZW50fHwiYm9vbGVhbiIhPXR5cGVvZiBhR1RNLmQuY29uc2VudC5oYXNSZXNwb25zZXx8IWFHVE0uZC5jb25zZW50Lmhhc1Jlc3BvbnNlKXJldHVybiBhR1RNLmYubG9nKCJlMTMiLG51bGwpLCExO2FHVE0uZC5pbml0fHwoKHdpbmRvd1thR1RNLmMuZ2RsXXx8W10pLmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7aWYoIm9iamVjdCI9PXR5cGVvZiBlJiZlKXtpZighZS5hR1RNY2hrKXtlLmFHVE1kbD0hMDt2YXIgYT1KU09OLnBhcnNlKGFHVE0uZi5zU3RyZihlKSk7dm9pZCAwIT09YVsiZ3RtLnVuaXF1ZUV2ZW50SWQiXSYmZGVsZXRlIGFbImd0bS51bmlxdWVFdmVudElkIl0sYUdUTS5kLmYucHVzaChhKX19ZWxzZSBhR1RNLmYubG9nKCJlMTciLHtvYmpfdHlwZTp0eXBlb2YgZSxvYmpfdmFsdWU6ZSxpbmRleDp0fSksYUdUTS5kLmYucHVzaCh7ZXZlbnQ6ImV4Y2VwdGlvbiIsZXJybXNnOiJEYXRhTGF5ZXIgRW50cnkgaXMgbm8gb2JqZWN0IixlcnJ0eXBlOiJETCBFcnJvciIsb2JqX3R5cGU6dHlwZW9mIGUsb2JqX3ZhbHVlOmV9KX0pKSxhR1RNLmQuY29uc2VudC5ndG1Db25zZW50JiYoYUdUTS5mLmluaXRHVE0oITEpLGFHVE0uZC5pbml0PSEwKSxhR1RNLmQuaW5pdCYmYUdUTS5mLmNoa0RQcmVhZHkoKSk7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGFHVE0uZi5pbmplY3RfY2FsbGJhY2smJmFHVE0uZi5pbmplY3RfY2FsbGJhY2soKSxhR1RNLmYubG9nKCJtNiIsbnVsbCksITB9LGFHVE0uZi5pRnJhbWVGaXJlPWZ1bmN0aW9uKGUpeyJvYmplY3QiPT10eXBlb2YgZSYmZSYmKGFHVE0uZC5pc19pZnJhbWUmJiJzdHJpbmciPT10eXBlb2YgZS5ldmVudCYmL14oYUdUTXxndG1cLnxbYXZdRE9NcmVhZHl8W2F2XVBBR0VyZWFkeSkvLnRlc3QoZS5ldmVudCk/YUdUTS5mLnNlbmRuYXVzKGUpOihlLmFHVE1fc291cmNlPSJpRnJhbWUgIitkb2N1bWVudC5sb2NhdGlvbi5ob3N0bmFtZSxhR1RNLmQuaWZyYW1lLmNvdW50ZXIuZXZlbnRzKyssZS5pZkV2Q3RyPWFHVE0uZC5pZnJhbWUuY291bnRlci5ldmVudHMsInN0cmluZyI9PXR5cGVvZiBlLmV2ZW50JiZlLmV2ZW50JiYoYUdUTS5kLmlmcmFtZS5jb3VudGVyW2UuZXZlbnRdPWFHVE0uZC5pZnJhbWUuY291bnRlcltlLmV2ZW50XXx8MCxhR1RNLmQuaWZyYW1lLmNvdW50ZXJbZS5ldmVudF0rKyxlWyJpZkV2Q3RyXyIrZS5ldmVudF09YUdUTS5kLmlmcmFtZS5jb3VudGVyW2UuZXZlbnRdKSxlLmFHVE10cyYmZGVsZXRlIGUuYUdUTXRzLGUuYUdUTXBhcmFtcyYmZGVsZXRlIGUuYUdUTXBhcmFtcyxhR1RNLmQuaWZyYW1lLm9yaWdpbj93aW5kb3cudG9wLnBvc3RNZXNzYWdlKGUsYUdUTS5kLmlmcmFtZS5vcmlnaW4pOmFHVE0uZC5mLnF1ZXVlLnB1c2goZSkpKX0sYUdUTS5mLmlmSGFuZHNoYWtlPWZ1bmN0aW9uKCl7aWYoIWFHVE0uZC5pc19pZnJhbWUmJiFhR1RNLmQuaWZyYW1lLmhhbmRzaGFrZSl7dmFyIGU9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlmcmFtZSIpO2lmKCFlLmxlbmd0aClyZXR1cm47Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciBhPWVbdF07YSYmYS5jb250ZW50V2luZG93JiZhLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UmJmEuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgiYUdUTV9Ub3AyaUZyYW1lIEhhbmRzaGFrZSIsIioiKX1hR1RNLmQuaWZyYW1lLmhhbmRzaGFrZT0hMH19LGFHVE0uZi5pZkhTbGlzdGVuPWZ1bmN0aW9uKGUpe2lmKGFHVE0uZC5pc19pZnJhbWUmJiJzdHJpbmciPT10eXBlb2YgZS5kYXRhJiYiYUdUTV9Ub3AyaUZyYW1lIEhhbmRzaGFrZSI9PWUuZGF0YSlmb3IoYUdUTS5kLmlmcmFtZS5vcmlnaW49ZS5vcmlnaW4sYUdUTS5kLmlmcmFtZS5pZkxpc3Rlbj0hMSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsYUdUTS5mLmlmSFNsaXN0ZW4sITEpO2FHVE0uZC5mLmxlbmd0aDspe3ZhciB0PWFHVE0uZC5mLnNoaWZ0KCk7YUdUTS5mLmlGcmFtZUZpcmUodCl9fSxhR1RNLmYudk9iPWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgZXx8IWUpcmV0dXJuITE7dHJ5e0pTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpfWNhdGNoKGUpe3JldHVybiExfXJldHVybiEwfSxhR1RNLmYudlN0PWZ1bmN0aW9uKGUpe3ZhciB0PUFycmF5LmlzQXJyYXkoZSk/ZToic3RyaW5nIj09dHlwZW9mIGU/W2VdOltdO3JldHVybiAwIT09dC5sZW5ndGgmJnQuZXZlcnkoKGZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZSYmIiIhPT1lfSkpfSxhR1RNLmYuZXZMc3RuPWZ1bmN0aW9uKGUsdCxhKXtpZigid2luZG93Ij09PWUmJihlPXdpbmRvdyksImRvY3VtZW50Ij09PWUmJihlPWRvY3VtZW50KSwib2JqZWN0Ij09dHlwZW9mIGUmJmUmJiJzdHJpbmciPT10eXBlb2YgdCYmImZ1bmN0aW9uIj09dHlwZW9mIGEpdHJ5eyJtZXNzYWdlIj09dD9hR1RNLmQuaWZyYW1lLnRvcExpc3Rlbnx8YUdUTS5kLmlzX2lmcmFtZXx8KGFHVE0uZC5pZnJhbWUudG9wTGlzdGVuPSEwLGUuYWRkRXZlbnRMaXN0ZW5lcih0LChmdW5jdGlvbihlKXthKHZvaWQgMCE9PWUuZGF0YT9lLmRhdGE6bnVsbCwic3RyaW5nIj09dHlwZW9mIGUub3JpZ2luP2Uub3JpZ2luOiIiKX0pKSk6ZS5hZGRFdmVudExpc3RlbmVyKHQsYSl9Y2F0Y2gobil7YUdUTS5mLmxvZygiZTEyIix7ZXJyb3I6bixlbDplLGV2OnQsZmN0OmF9KX1lbHNlIGFHVE0uZi5sb2coImUxMSIse2VsOmUsZXY6dCxmY3Q6YX0pfSxhR1RNLmYucm1Mc3RuPWZ1bmN0aW9uKGUsdCxhKXsid2luZG93Ij09PWUmJihlPXdpbmRvdyksImRvY3VtZW50Ij09PWUmJihlPWRvY3VtZW50KTt0cnl7ZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsYSl9Y2F0Y2goZSl7fX0sYUdUTS5mLmdldFZhbD1mdW5jdGlvbihlLHQpe2lmKGFHVE0uZi52U3QoW2UsdF0pJiZ0Lm1hdGNoKC9bYS16XSsvaSkmJigicCIhPWV8fCJvYmplY3QiPT10eXBlb2YgcGVyZm9ybWFuY2UmJnBlcmZvcm1hbmNlKSlzd2l0Y2goZSl7Y2FzZSJ3IjpyZXR1cm4gYUdUTS5mLnZPYih3aW5kb3dbdF0pP0pTT04ucGFyc2UoYUdUTS5mLnNTdHJmKHdpbmRvd1t0XSkpOndpbmRvd1t0XTtjYXNlIm4iOnJldHVybiBhR1RNLmYudk9iKG5hdmlnYXRvclt0XSk/SlNPTi5wYXJzZShhR1RNLmYuc1N0cmYobmF2aWdhdG9yW3RdKSk6bmF2aWdhdG9yW3RdO2Nhc2UiZCI6cmV0dXJuIGRvY3VtZW50W3RdO2Nhc2UibCI6cmV0dXJuIGRvY3VtZW50LmxvY2F0aW9uW3RdO2Nhc2UiaCI6cmV0dXJuIGRvY3VtZW50LmhlYWRbdF07Y2FzZSJiIjpyZXR1cm4gZG9jdW1lbnQuYm9keVt0XTtjYXNlInMiOnJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaHRtbCIpWzBdLnNjcm9sbFRvcHx8MDtjYXNlIm0iOnJldHVybiB3aW5kb3cuc2NyZWVuW3RdO2Nhc2UiYyI6cmV0dXJuIHdpbmRvdy5nb29nbGVfdGFnX2RhdGEmJndpbmRvdy5nb29nbGVfdGFnX2RhdGEuaWNzP0pTT04ucGFyc2UoYUdUTS5mLnNTdHJmKHdpbmRvdy5nb29nbGVfdGFnX2RhdGEuaWNzKSk6bnVsbDtjYXNlInAiOnJldHVybiJub3ciPT10P3BlcmZvcm1hbmNlLm5vdygpOnBlcmZvcm1hbmNlW3RdO2RlZmF1bHQ6cmV0dXJufX0sYUdUTS5mLmdldE5vZGVBdHRyPWZ1bmN0aW9uKGUsdCl7dmFyIGE9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKTtyZXR1cm4gYT9hLmdldEF0dHJpYnV0ZSh0KTpudWxsfSxhR1RNLmYubmV3Tm9kZT1mdW5jdGlvbihlLHQsYSl7aWYoYUdUTS5mLnZTdChbZSx0XSkmJiJvYmplY3QiPT10eXBlb2YgYSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlKSxvPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodCk7aWYobyl7Zm9yKHZhciByIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShyKSl7dmFyIGk9ci5zcGxpdCgiLiIpOzE9PT1pLmxlbmd0aD9uLnNldEF0dHJpYnV0ZShyLGFbcl0pOihuW2lbMF1dfHwobltpWzBdXT17fSksbltpWzBdXVtpWzFdXT1hW3JdKX1vLmFwcGVuZENoaWxkKG4pfX19LGFHVE0uZi5kZWxOb2RlPWZ1bmN0aW9uKGUpe2lmKGFHVE0uZi52U3QoZSkpe3ZhciB0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZSk7dCYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpfX0sYUdUTS5mLnBhZ2VpbmZvPWZ1bmN0aW9uKGUpe3ZhciB0PTAsYT0wO2lmKChlPWV8fHt9KS5jb3VudFdvcmRzJiZmdW5jdGlvbiBnZXRUZXh0KGUpe2lmKDM9PT1lLm5vZGVUeXBlKXQrPWUudGV4dENvbnRlbnQudHJpbSgpLnNwbGl0KC9ccysvKS5sZW5ndGg7ZWxzZSBpZigxPT09ZS5ub2RlVHlwZSYmIS9eKHNjcmlwdHxzdHlsZXxub3NjcmlwdCkkL2kudGVzdChlLnRhZ05hbWUpKWZvcih2YXIgYT0wO2E8ZS5jaGlsZE5vZGVzLmxlbmd0aDthKyspZ2V0VGV4dChlLmNoaWxkTm9kZXNbYV0pfShkb2N1bWVudC5ib2R5KSxlLmNvdW50SW1hZ2VzKWZvcih2YXIgbj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW1nIiksbz0wO288bi5sZW5ndGg7bysrKW5bb10ubmF0dXJhbFdpZHRoPjI1MCYmbltvXS5uYXR1cmFsSGVpZ2h0PjI1MCYmYSsrO3JldHVybnt3b3Jkczp0LGltYWdlczphfX0sYUdUTS5mLmNwTHN0PWZ1bmN0aW9uKGUsdCxhKXt0cnl7ZS5hZGRFdmVudExpc3RlbmVyKHQsKGZ1bmN0aW9uKGUpe3ZhciB0O3dpbmRvdy5nZXRTZWxlY3Rpb24mJih0PXdpbmRvdy5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpKSYmYSh0KX0pKX1jYXRjaCh0KXthR1RNLmYubG9nKCJlMTIiLHtlbGVtZW50OmUsZXJyb3I6dH0pfX0sYUdUTS5mLmVsTHN0PWZ1bmN0aW9uKGUsdCxhKXt0cnl7ZS5hZGRFdmVudExpc3RlbmVyKHQsKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxuPSIiLG89IiIscj1udWxsLGk9bnVsbCxjPTAsZj10aGlzO2YmJmYucGFyZW50RWxlbWVudDspZj1mLnBhcmVudEVsZW1lbnQsIW4mJmYuaWQmJihuPSgic3RyaW5nIj09dHlwZW9mIGYubm9kZU5hbWU/Zi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKyI6IjoiIikrZi5pZCksIW8mJmYuZ2V0QXR0cmlidXRlKCJjbGFzcyIpJiYobz0oInN0cmluZyI9PXR5cGVvZiBmLm5vZGVOYW1lP2Yubm9kZU5hbWUudG9Mb3dlckNhc2UoKSsiOiI6IiIpK2YuZ2V0QXR0cmlidXRlKCJjbGFzcyIpKTtpZigiaW5wdXQiPT09dHx8InNlbGVjdCI9PT10fHwidGV4dGFyZWEiPT09dCl7Zm9yKGY9dGhpcztmJiZmLnBhcmVudEVsZW1lbnQmJiJmb3JtIiE9PWYudGFnTmFtZS50b0xvd2VyQ2FzZSgpOylmPWYucGFyZW50RWxlbWVudDsiZm9ybSI9PT1mLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmKHI9e2lkOmYuaWQsY2xhc3M6Zi5nZXRBdHRyaWJ1dGUoImNsYXNzIiksbmFtZTpmLmdldEF0dHJpYnV0ZSgibmFtZSIpLGFjdGlvbjpmLmFjdGlvbixlbGVtZW50czpmLmVsZW1lbnRzLmxlbmd0aH0saT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGYuZWxlbWVudHMsdGhpcykrMSl9Im9iamVjdCI9PXR5cGVvZiB0aGlzLmVsZW1lbnRzJiYibnVtYmVyIj09dHlwZW9mIHRoaXMuZWxlbWVudHMubGVuZ3RoJiYoYz10aGlzLmVsZW1lbnRzLmxlbmd0aCk7dmFyIHM9e3RhZ05hbWU6dCx0YXJnZXQ6dGhpcy50YXJnZXR8fCIiLHBhcmVudElEOm4scGFyZW50Q2xhc3M6byxpZDp0aGlzLmlkfHwiIixuYW1lOnRoaXMuZ2V0QXR0cmlidXRlKCJuYW1lIil8fCIiLGNsYXNzOnRoaXMuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIixocmVmOnRoaXMuaHJlZnx8IiIsc3JjOnRoaXMuc3JjfHwiIixhY3Rpb246dGhpcy5hY3Rpb258fCIiLHR5cGU6dGhpcy50eXBlfHwiIixlbGVtZW50czpjLHBvc2l0aW9uOmksZm9ybTpyLGh0bWw6dGhpcy5vdXRlckhUTUw/dGhpcy5vdXRlckhUTUwudG9TdHJpbmcoKToiIix0ZXh0OnRoaXMub3V0ZXJUZXh0P3RoaXMub3V0ZXJUZXh0LnRvU3RyaW5nKCk6IiJ9O3MuaHRtbC5sZW5ndGg+NTEyJiYocy5odG1sPXMuaHRtbC5zbGljZSgwLDUwOSkrIi4uLiIpLHMudGV4dC5sZW5ndGg+NTEyJiYocy50ZXh0PXMudGV4dC5zbGljZSgwLDUwOSkrIi4uLiIpLGEocyl9KSl9Y2F0Y2godCl7YUdUTS5mLmxvZygiZTEyIix7ZWxlbWVudDplLGVycm9yOnR9KX19LGFHVE0uZi5hZGRFbExzdD1mdW5jdGlvbihlLHQsYSl7aWYoYUdUTS5mLnZTdChbZSx0XSkmJiJmdW5jdGlvbiI9PXR5cGVvZiBhKXt2YXIgbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGUpOyJvYmplY3QiPT10eXBlb2YgbiYmIm51bWJlciI9PXR5cGVvZiBuLmxlbmd0aCYmMCE9bi5sZW5ndGgmJm4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoImNvcHkiPT09dClhR1RNLmYuY3BMc3QoZSx0LGEpO2Vsc2UgYUdUTS5mLmVsTHN0KGUsdCxhKX0pKX19LGFHVE0uZi5vYnNlcnZlcj1mdW5jdGlvbihlLHQsYSl7aWYoYUdUTS5mLnZTdChbZSx0XSkmJiJmdW5jdGlvbiI9PXR5cGVvZiBhKXtuZXcgTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24obil7bi5mb3JFYWNoKChmdW5jdGlvbihuKXsiY2hpbGRMaXN0Ij09PW4udHlwZSYmbi5hZGRlZE5vZGVzLmxlbmd0aCYmQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChuLmFkZGVkTm9kZXMsKGZ1bmN0aW9uKG4pe2lmKDE9PT1uLm5vZGVUeXBlJiYic3RyaW5nIj09dHlwZW9mIG4udGFnTmFtZSYmbi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PT1lLnRvTG93ZXJDYXNlKCkmJmFHVE0uZi5lbExzdChuLHQsYSksMT09PW4ubm9kZVR5cGUmJm4ucXVlcnlTZWxlY3RvckFsbCl7dmFyIG89bi5xdWVyeVNlbGVjdG9yQWxsKGUudG9Mb3dlckNhc2UoKSk7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChvLChmdW5jdGlvbihlKXthR1RNLmYuZWxMc3QoZSx0LGEpfSkpfX0pKX0pKX0pKS5vYnNlcnZlKGRvY3VtZW50LmJvZHkse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwLGF0dHJpYnV0ZXM6ITF9KX19LGFHVE0uZi5yVGVzdD1mdW5jdGlvbihlLHQpe3JldHVybiBhR1RNLmYudlN0KFtlLHRdKSYmbmV3IFJlZ0V4cCh0LCJpIikudGVzdChlKX0sYUdUTS5mLnJNYXRjaD1mdW5jdGlvbihlLHQpe3JldHVybiBlLm1hdGNoKG5ldyBSZWdFeHAodCkpfSxhR1RNLmYuclJlcGxhY2U9ZnVuY3Rpb24oZSx0LGEpe3JldHVybiBhR1RNLmYudlN0KFtlLHQsYV0pP2UucmVwbGFjZShuZXcgUmVnRXhwKHQsImdpIiksYSk6ZX0sYUdUTS5mLmlzSUZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5zZWxmIT09d2luZG93LnRvcH0sYUdUTS5mLmpzZXJyb3JzPWZ1bmN0aW9uKCl7YUdUTS5mLmV2THN0bih3aW5kb3csImVycm9yIiwoZnVuY3Rpb24oZSl7aWYobnVsbCE9PWUpe3ZhciB0PSJzdHJpbmciPT10eXBlb2YgZS5tZXNzYWdlP2UubWVzc2FnZToiIixhPSJzdHJpbmciPT10eXBlb2YgZS5maWxlbmFtZT9lLmZpbGVuYW1lOiIiO2lmKCJzY3JpcHQgZXJyb3IuIj09dC50b0xvd2VyQ2FzZSgpKXtpZighYSlyZXR1cm47dD10LnJlcGxhY2UoIi4iLCI6IikrIiBlcnJvciBmcm9tIG90aGVyIGRvbWFpbi4ifWEmJih0Kz0iIHwgZmlsZTogIithKTt2YXIgbj1hR1RNLmYuc3RyY2xlYW4oZS5saW5lbm8pOyIwIj09biYmKG49IiIpLG4mJih0Kz0iIHwgbGluZTogIituKTt2YXIgbz1hR1RNLmYuc3RyY2xlYW4oZS5jb2xubyk7IjAiPT1vJiYobz0iIiksbyYmKHQrPSIgfCBjb2w6ICIrbyksYUdUTS5kLmVycm9ycy5wdXNoKHQpO3ZhciByPSIiO3RyeXtyPW5hdmlnYXRvci5hcHBDb2RlTmFtZSsiIHwgIituYXZpZ2F0b3IuYXBwTmFtZSsiIHwgIituYXZpZ2F0b3IuYXBwVmVyc2lvbisiIHwgIituYXZpZ2F0b3IucGxhdGZvcm19Y2F0Y2goZSl7fWlmKGFHVE0uZC5lcnJvcl9jb3VudGVyKys+PTEwMClyZXR1cm47YUdUTS5kLmVycm9yX2NvdW50ZXI8PTUmJmFHVE0uZi5maXJlKHtldmVudDoiZXhjZXB0aW9uIixlcnJtc2c6dCxicm93c2VyOnIsZXJydHlwZToiSlMgRXJyb3IiLHRpbWVzdGFtcDoobmV3IERhdGUpLmdldFRpbWUoKSxlcnJjdDphR1RNLmQuZXJyb3JfY291bnRlcixldmVudE1vZGVsOm51bGx9KX19KSl9LGFHVE0uZi50aW1lcmZrdD1mdW5jdGlvbihlKXt2YXIgdD1KU09OLnBhcnNlKGFHVE0uZi5zU3RyZihlKSk7dC50aW1lcl9tcz0xKnQudGltZXJfbXMsdC50aW1lcl9jdCsrLHQudGltZXJfdG09dC50aW1lcl9tcyp0LnRpbWVyX2N0LHQudGltZXJfc2M9cGFyc2VGbG9hdCgodC50aW1lcl90bS8xZTMpLnRvRml4ZWQoMykpLHQuZXZlbnQ9dC5ldmVudHx8InRpbWVyIiwtMSE9PXQuZXZlbnQuaW5kZXhPZigiW3NdIikmJih0LmV2ZW50PXQuZXZlbnQucmVwbGFjZSgiW3NdIix0LnRpbWVyX3NjLnRvU3RyaW5nKCkpKSx0LmV2ZW50TW9kZWw9bnVsbCxhR1RNLmYuZmlyZSh0KX0sYUdUTS5mLnRpbWVyPWZ1bmN0aW9uKGUsdCxhLG4sbyl7aWYoIWUmJiJvYmplY3QiPT10eXBlb2YgYSYmYSYmInN0cmluZyI9PXR5cGVvZiBhLmV2ZW50JiYoZT1hLmV2ZW50KSxlPWV8fCJ0aW1lciIsZSs9Il8iKyhuZXcgRGF0ZSkuZ2V0VGltZSgpLnRvU3RyaW5nKCkrIl8iK01hdGguZmxvb3IoOTk5OTk5Kk1hdGgucmFuZG9tKCkrMSkudG9TdHJpbmcoKSxhR1RNLmYuc3RvcHRpbWVyKGUpLCJvYmplY3QiPT10eXBlb2YgYSYmYSl2YXIgcj1KU09OLnBhcnNlKGFHVE0uZi5zU3RyZihhKSk7ZWxzZSByPXt9O3IudGltZXJfbm09ZSxyLnRpbWVyX21zPW4sci50aW1lcl9ycD1vLHIudGltZXJfY3Q9MCxyLmlkPTE9PT1yLnRpbWVyX3JwP3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dD90KHIpOmFHVE0uZi50aW1lcmZrdChyKX0pLG4pOnNldEludGVydmFsKChmdW5jdGlvbigpe3Q/dChyKTphR1RNLmYudGltZXJma3Qociksci50aW1lcl9jdCsrLHIudGltZXJfcnA+MCYmci50aW1lcl9jdD49ci50aW1lcl9ycCYmYUdUTS5mLnN0b3B0aW1lcihyLnRpbWVyX25tKX0pLG4pLGFHVE0uZC50aW1lcltlXT1yfSxhR1RNLmYuc3RvcHRpbWVyPWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiIT10eXBlb2YgYUdUTS5kLnRpbWVyJiYoYUdUTS5kLnRpbWVyPXt9KSwib2JqZWN0Ij09dHlwZW9mIGFHVE0uZC50aW1lcltlXSl7dmFyIHQ9YUdUTS5kLnRpbWVyW2VdO3QudGltZXJfcnA/Y2xlYXJJbnRlcnZhbCh0LmlkKTpjbGVhclRpbWVvdXQodC5pZCksZGVsZXRlIGFHVE0uZC50aW1lcltlXX19LGFHVE0uZi5pbml0PWZ1bmN0aW9uKCl7IWFHVE0uYy5kZWJ1ZyYmYUdUTS5mLm9wdG91dCgpfHwoYUdUTS5mLmNvbmZpZyhhR1RNLmMpLGFHVE0uYy5pZnJhbWVTdXBwb3J0JiZhR1RNLmQuaXNfaWZyYW1lPyhhR1RNLmQuY29uc2VudC5ndG1Db25zZW50PSEwLGFHVE0uZC5jb25zZW50Lmhhc1Jlc3BvbnNlPSEwLGFHVE0uZC5jb25zZW50LmZlZWRiYWNrPSJQYWdlIGlzIGlGcmFtZSIsYUdUTS5kLmlmcmFtZS5pZkxpc3Rlbnx8KGFHVE0uZC5pZnJhbWUuaWZMaXN0ZW49ITAsd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGFHVE0uZi5pZkhTbGlzdGVuKSksYUdUTS5kLmluaXR8fGFHVE0uZi5pbmplY3QoKSk6InN0cmluZyI9PXR5cGVvZiBhR1RNLmMuY21wJiZhR1RNLmMuY21wPyJub25lIj09YUdUTS5jLmNtcD8oYUdUTS5kLmNvbnNlbnQ9e2d0bUNvbnNlbnQ6ITAsaGFzUmVzcG9uc2U6ITAsZmVlZGJhY2s6Ik5vIENvbnNlbnQgQ2hlY2sgY29uZmlndXJlZCJ9LGFHVE0uZi5pbmplY3QoKSk6KGFHVE0uZi5sb2FkX2NjKGFHVE0uYy5jbXAsYUdUTS5mLmNvbnNlbnRfbGlzdGVuZXIpLGFHVE0uZi5pbml0R1RNKCEwKSk6KGFHVE0uZi5jb25zZW50X2xpc3RlbmVyKCksYUdUTS5mLmluaXRHVE0oITApKSxhR1RNLmYuanNlcnJvcnMoKSl9LGFHVE0uZi5zZW5kbmF1cz1mdW5jdGlvbihlKXtpZihlJiYib2JqZWN0Ij09dHlwZW9mIGUpe3dpbmRvd1thR1RNLmMuZ2RsXTt2YXIgdD13aW5kb3dbYUdUTS5jLmdkbF0ucHVzaDshYUdUTS5kLm9yaWdpbmFsRExwdXNoJiYvc2FuZGJveC9pLnRlc3QodC50b1N0cmluZygpKSYmKGFHVE0uZC5vcmlnaW5hbERMcHVzaD10KTt2YXIgYT0hMTthR1RNLmMuZGxPcmdQdXNoJiZhR1RNLmQub3JpZ2luYWxETHB1c2gmJmFHVE0uZC5vcmlnaW5hbERMcHVzaC50b1N0cmluZygpIT09dC50b1N0cmluZygpJiYoYT0hMCxhR1RNLmQuZGxIb29rTG9nZ2VkfHwoYUdUTS5kLm9yaWdpbmFsRExwdXNoKHtldmVudDoiZXhjZXB0aW9uIixlcnJ0eXBlOiJETCBFcnJvciIsZXJybXNnOiJGdW5jdGlvbiBkYXRhTGF5ZXIucHVzaCBob29rZWQgLSBubyBsb25nZXIgZnJvbSBHVE0iLGZjdF9ob29rOnQudG9TdHJpbmcoKSxmY3Rfb3JpZzphR1RNLmQub3JpZ2luYWxETHB1c2gudG9TdHJpbmcoKSx0aW1lc3RhbXA6KG5ldyBEYXRlKS5nZXRUaW1lKCksZXZlbnRNb2RlbDpudWxsfSksYUdUTS5kLmRsSG9va0xvZ2dlZD0hMCksInJlcGxhY2UiPT09YUdUTS5jLmRsT3JnUHVzaCYmKHdpbmRvd1thR1RNLmMuZ2RsXS5wdXNoPWFHVE0uZC5vcmlnaW5hbERMcHVzaCxhPSExKSksYSYmInVzZSI9PT1hR1RNLmMuZGxPcmdQdXNoP2FHVE0uZC5vcmlnaW5hbERMcHVzaChlKTp3aW5kb3dbYUdUTS5jLmdkbF0ucHVzaChlKSwiZnVuY3Rpb24iPT10eXBlb2YgYUdUTS5mLnNlbmRuYXVzX2NhbGxiYWNrJiZhR1RNLmYuc2VuZG5hdXNfY2FsbGJhY2soZSksYUdUTS5mLmxvZygibTkiLGUpfX0sYUdUTS5mLmZpcmU9ZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBlJiZlKXt0cnl7aWYoIShhPUpTT04ucGFyc2UoYUdUTS5mLnNTdHJmKGUpKSkpcmV0dXJuIHZvaWQgYUdUTS5mLmxvZygiZTE1IixhKX1jYXRjaChuKXt2YXIgdD0iYUdUTSBGaXJlIEVycm9yIChKU09OLnBhcnNlKSI7InN0cmluZyI9PXR5cGVvZiBlLmV2ZW50JiYodD10KyIgKEV2ZW50OiAiK2UuZXZlbnQrIikiKTt2YXIgYT17ZXZlbnQ6ImV4Y2VwdGlvbiIsZXJybXNnOm4ubWVzc2FnZSxlcnJ0eXBlOnQsdGltZXN0YW1wOihuZXcgRGF0ZSkuZ2V0VGltZSgpLGVycmN0OmFHVE0uZC5lcnJvcl9jb3VudGVyfHwxLGV2ZW50TW9kZWw6bnVsbH07YUdUTS5mLmxvZygiZTE1IixhKX1pZighKCJudW1iZXIiPT10eXBlb2YgYS5hR1RNdHN8fCJvYmplY3QiPT10eXBlb2YgYS5ldmVudE1vZGVsJiZhLmV2ZW50TW9kZWx8fCJzdHJpbmciIT10eXBlb2YgYS5ldmVudCYmInN0cmluZyI9PXR5cGVvZiBhLnR5cGUmJiJvYmplY3QiPT10eXBlb2YgYS5mbGFncyYmImJvb2xlYW4iPT10eXBlb2YgYS5mbGFncy5lbmFibGVVbnRhZ2dlZFBhZ2VSZXBvcnRpbmcmJmEuZmxhZ3MuZW5hYmxlVW50YWdnZWRQYWdlUmVwb3J0aW5nKSl7aWYoYS5hR1RNdHM9RGF0ZS5ub3coKSxhLmV2ZW50TW9kZWw9bnVsbCxhR1RNLmMuY29uc2VudF9ldmVudHMmJiJzdHJpbmciPT10eXBlb2YgYS5ldmVudCYmYUdUTS5jLmNvbnNlbnRfZXZlbnRzLmluZGV4T2YoIiwiK2EuZXZlbnQrIiwiKT49MClpZigib2JqZWN0Ij09dHlwZW9mIGFHVE0uYy5jb25zZW50X2V2ZW50X2F0dHJbYS5ldmVudF0pZm9yKHZhciBuIGluIGFHVE0uYy5jb25zZW50X2V2ZW50X2F0dHJbYS5ldmVudF0pdm9pZCAwIT09YVtuXSYmKGFHVE0uYy5jb25zZW50X2V2ZW50X2F0dHJbYS5ldmVudF1bbl0mJmFbbl0hPWFHVE0uYy5jb25zZW50X2V2ZW50X2F0dHJbYS5ldmVudF1bbl18fGFHVE0uZi5ydW5fY2MoInVwZGF0ZSIpKTtlbHNlIGFHVE0uZi5ydW5fY2MoInVwZGF0ZSIpO2lmKGFHVE0uYy5kbFNldCYmIm9iamVjdCI9PXR5cGVvZiBnb29nbGVfdGFnX21hbmFnZXImJiJvYmplY3QiPT10eXBlb2YgZ29vZ2xlX3RhZ19tYW5hZ2VyW2FHVE0uYy5ndG1JRF0mJk9iamVjdC5rZXlzKGFHVE0uYy5kbFNldCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9YUdUTS5jLmRsU2V0W2VdLG49Z29vZ2xlX3RhZ19tYW5hZ2VyW2FHVE0uYy5ndG1JRF1bYUdUTS5jLmdkbF0uZ2V0KHQpO3ZvaWQgMCE9PW4mJihhW2VdPW4pfSkpLCgib2JqZWN0IiE9dHlwZW9mIGFHVE0uZC5jb25zZW50fHwhYUdUTS5kLmNvbnNlbnQuaGFzUmVzcG9uc2V8fCFhR1RNLmQuY29uc2VudC5ndG1Db25zZW50KSYmKCJzdHJpbmciIT10eXBlb2YgYS5ldmVudHx8MCE9PWEuZXZlbnQuaW5kZXhPZigiYUdUTSIpKXx8YUdUTS5jLmlmcmFtZVN1cHBvcnQmJmFHVE0uZC5pc19pZnJhbWUmJiFhR1RNLmQuaWZyYW1lLm9yaWdpbilyZXR1cm4gZGVsZXRlIGEuYUdUTXRzLGRlbGV0ZSBhLmV2ZW50TW9kZWwsdm9pZCBhR1RNLmQuZi5wdXNoKEpTT04ucGFyc2UoYUdUTS5mLnNTdHJmKGEpKSk7KGFHVE0uZC5jb25zZW50Lmd0bUNvbnNlbnR8fCJzdHJpbmciPT10eXBlb2YgYS5ldmVudCYmMD09PWEuZXZlbnQuaW5kZXhPZigiYUdUTSIpKSYmKCJzdHJpbmciPT10eXBlb2YgYS5ldmVudCYmMD09PWEuZXZlbnQuaW5kZXhPZigiYUdUTSIpfHwoZGVsZXRlIGFbImd0bS51bmlxdWVFdmVudElkIl0sZGVsZXRlIGEuYUdUTXBhcmFtcyxhLmFHVE1wYXJhbXM9SlNPTi5wYXJzZShhR1RNLmYuc1N0cmYoYSkpKSxhR1RNLmQuZGwucHVzaChhKSxhR1RNLmMuaWZyYW1lU3VwcG9ydCYmYUdUTS5kLmlzX2lmcmFtZSYmInN0cmluZyI9PXR5cGVvZiBhLmV2ZW50P2FHVE0uZi5pRnJhbWVGaXJlKGEpOmFHVE0uZi5zZW5kbmF1cyhhKSksImZ1bmN0aW9uIj09dHlwZW9mIGFHVE0uZi5maXJlX2NhbGxiYWNrJiZhR1RNLmYuZmlyZV9jYWxsYmFjayhhKSxhR1RNLmYubG9nKCJtNyIsYSl9fWVsc2UgYUdUTS5mLmxvZygiZTkiLHtvOnR5cGVvZiBlfSl9Ow==');

// Build JS Code for response
var jsCode = agtm + cmp + config + 'aGTM.f.init();';

// Response
setResponseStatus(200);
setResponseHeader(aGTMversion);
setResponseBody(jsCode);
returnResponse();


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_response",
        "versionId": "1"
      },
      "param": [
        {
          "key": "writeResponseAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "writeHeaderAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "queryParametersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "pathAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "return_response",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Check JS Code
  code: |
    // Set Mocks
    //mock('setResponseStatus', 200);
    //mock('setResponseHeader', '1.2.2');
    //mock('setResponseBody', 'console.log("aGTM");');
    //mock('returnResponse');

    // Run Code
    runCode(mockData);

    // Checks
    //assertApi('setResponseStatus').wasCalledWith(200);
    //assertApi('setResponseHeader').wasCalled();
    //assertApi('setResponseBody').wasCalled();
    //assertApi('returnResponse').wasCalled();
setup: |-
  // Import needed libraries
  const log = require('logToConsole');

  // Setup MockData
  const mockData = {
    gtm: {
      gtm_id: 'GTM-XYZ123',
      gtm_consent: true,
      gtm_env: ''
    },
    cmp: null,
    consent: {
      gtmPurposes: 'Functional',
      gtmServices: 'Google Tag Manager',
      gtmVendors: 'Google Inc'
    },
    sendConsentEvent: true,
    useListener: false,
    consent_events: 'cmpEvent,cmpUpdate',
    vPageview: false,
    dlStateEvents: false,
    gdl: '',
    nonce: 'ABC123',
    debug: true
  };


___NOTES___

# aGTM serverside GTM Client Template

This is the aGTM Client Template to use it with the serverside Google Tag Manager.

Read more about aGTM in the <a href="https://github.com/Andiministrator/aGTM?tab=readme-ov-file#agtm---a-galactic-tagging-modulator">aGTM Documentation</a>.

Common Website integration code template:
```html
<script>
(function(w,d,s,u){
  var t=d.getElementsByTagName(s)[0],e=d.createElement(s);
  e.async=true;e.src=u;
  t.parentNode.insertBefore(e,t);
})(window,document,'script','https://TM.YOUR-DOMAIN.COM/aGTM.js');
</script>
```

Website integration code template using an ID:
```html
<script>
(function(w,d,s,u){
  var t=d.getElementsByTagName(s)[0],e=d.createElement(s);
  e.async=true;e.src=u;
  t.parentNode.insertBefore(e,t);
})(window,document,'script','https://TM.YOUR-DOMAIN.COM/aGTM.js?id=website1');
</script>
```


